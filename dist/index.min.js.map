{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./out/dialog.js","webpack:///./out/errors.js","webpack:///./out/index.js","webpack:///./out/buttonOnClick.js","webpack:///./node_modules/maishu-toolkit/dist/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./out/image.js"],"names":["root","factory","exports","module","define","amd","a","i","window","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","defineProperty","showPanel","toast","showToastMessage","confirm","alert","hideDialog","showDialog","dialogConfig","errors_1","dialogContainer","document","body","addClassName","element","className","console","assert","c1","split","itemsToAdd","filter","o","indexOf","push","join","removeClassName","c2","itemsRemain","dialogElements","Array","dialogCallbacks","callback","style","display","setTimeout","dialogIndex","length","closeButtons","querySelectorAll","onclick","allButtons","item","addEventListener","event","currentTarget","tabIndex","firstField","querySelector","focus","on_keydown","removeEventListener","Promise","reslove","reject","removeProperty","keyCode","dialogElement","e","parentElement","findDialogElement","target","getAttribute","alertElement","getElementById","createElement","id","appendChild","innerHTML","args","title","message","okButton","confirmText","elementId","confirmDialogElment","obj","errors","argumentNull","msg","tagName","options","toastDialogElement","marginTop","header","modalBody","then","remove","execute","cancel","cancle","resolve","container","cancelText","modalHeader","modalFooter","cancelButton","catch","panel","modal","backdrop","footer","modalDialog","isIOS","navigator","userAgent","hide","opacity","dialogRect","getBoundingClientRect","touches","clientX","left","stopPropagation","preventDefault","transform","setBodyHeight","headerHeight","height","footerHeight","bodyHeight","innerHeight","maishu_toolkit_1","Errors","fileToBase64","imageFileToBase64","loadImageConfig","renderImage","generateImageBase64","buttonOnClick","buttonOnClick_1","dialog_1","image_1","__awaiter","this","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","apply","arg1","arg2","arg3","Error","button","setAttribute","exc","error","removeAttribute","cancelBubble","text","modules","installedModules","__webpack_require__","moduleId","l","m","c","d","name","r","Symbol","toStringTag","t","mode","__esModule","ns","create","n","p","s","__webpack_exports__","getTypeOf","input","isArray","cloneValue","quickCloneObject","quickCloneArray","map","output","executeDeepMerge","_objects","_options","arrayBehaviour","objects","oindex","keys","kindex","type","existingValueType","existingValue","newValue","concat","objectAssignDeep","objectAssignDeepInto","withOptions","Callback","funcs","func","forEach","DataSource","DataSourceSelectArguments","_errors__WEBPACK_IMPORTED_MODULE_0__","_callback__WEBPACK_IMPORTED_MODULE_1__","assign","dataSourceCanntInsert","dataSourceCanntDelete","dataSourceCanntUpdate","primaryKeyNull","queryResultTypeError","inserting","inserted","deleting","deleted","updating","updated","selecting","selected","primaryKeys","delete","insert","update","select","index","canInsert","fire","sender","dataItem","executeInsert","data","processError","canDelete","checkPrimaryKeys","executeDelete","canUpdate","executeUpdate","theItem","otherItem","pk","selectArguments","executeSelect","dataItems","totalRowCount","undefined","selectResult","method","handled","startRowIndex","maximumRows","deepEqual","x","y","prop","argumentName","fieldName","expectedType","formatDate","date","showHourMinutes","getFullYear","getMonth","getDate","getHours","getMinutes","guid","s4","Math","floor","random","toString","substring","HTML","addonClassName","sourceClassName","targetClassName","replace","RegExp","trim","_guid__WEBPACK_IMPORTED_MODULE_0__","_path__WEBPACK_IMPORTED_MODULE_1__","_errors__WEBPACK_IMPORTED_MODULE_2__","_callback__WEBPACK_IMPORTED_MODULE_3__","_data__WEBPACK_IMPORTED_MODULE_4__","_url__WEBPACK_IMPORTED_MODULE_5__","_deep_equal__WEBPACK_IMPORTED_MODULE_6__","_assign_deep__WEBPACK_IMPORTED_MODULE_7__","_format_date__WEBPACK_IMPORTED_MODULE_8__","_html__WEBPACK_IMPORTED_MODULE_9__","_value_store__WEBPACK_IMPORTED_MODULE_10__","pathConcat","paths","str","parseUrl","url","query","match","pl","search","decode","decodeURIComponent","urlParams","exec","pareeUrlQuery","substr","ValueStore","items","_value","add","g","Function","imageDisaplyText","config","draws","imageText","ctx","canvasWidth","canvasHeight","fontSize","bgColor","textColor","fillStyle","fillRect","font","textAlign","textWidth","startX","fillText","width","canvas","getContext","toDataURL","imageUrl","src","imageSize","arr","Number","valueOf","src_replace","loadImage","base64","image","Image","onload","imageFile","size","reader","FileReader","readAsArrayBuffer","ev","blob","Blob","blobURL","createObjectURL","drawImage","file","onerror","readAsDataURL"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.showPanel = exports.toast = exports.showToastMessage = exports.confirm = exports.alert = exports.hideDialog = exports.showDialog = exports.dialogConfig = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nfunction dialogContainer() {\r\n    return exports.dialogConfig.dialogContainer || document.body;\r\n}\r\nexports.dialogConfig = {\r\n    dialogContainer: null\r\n};\r\nfunction addClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsToAdd = c2.filter(o => c1.indexOf(o) < 0);\r\n    c1.push(...itemsToAdd);\r\n    element.className = c1.join(' ');\r\n}\r\nfunction removeClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsRemain = c1.filter(o => c2.indexOf(o) < 0);\r\n    element.className = itemsRemain.join(' ');\r\n}\r\nlet dialogElements = new Array();\r\nlet dialogCallbacks = new Array();\r\n/** 弹窗\r\n * @param element bootstrap 的 modal 元素\r\n */\r\nfunction showDialog(element, callback) {\r\n    removeClassName(element, 'out');\r\n    element.style.display = 'block';\r\n    setTimeout(() => {\r\n        addClassName(element, 'modal fade in');\r\n    }, 100);\r\n    let dialogIndex = dialogElements.indexOf(element);\r\n    if (dialogIndex < 0) {\r\n        dialogElements.push(element);\r\n        dialogIndex = dialogElements.length - 1;\r\n        let closeButtons = element.querySelectorAll('[data-dismiss=\"modal\"]') || [];\r\n        for (let i = 0; i < closeButtons.length; i++) {\r\n            closeButtons[i].onclick = () => hideDialog(element);\r\n        }\r\n        let allButtons = element.querySelectorAll('button');\r\n        for (let i = 0; i < allButtons.length; i++) {\r\n            allButtons.item(i).addEventListener('click', function (event) {\r\n                let callback = dialogCallbacks[dialogIndex];\r\n                if (callback) {\r\n                    callback(event.currentTarget);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    dialogCallbacks[dialogIndex] = callback;\r\n    element.tabIndex = 1;\r\n    var firstField = element.querySelector('input:not([type]),input:not([readonly])[type=\"text\"],input:not([readonly])[type=\"password\"]');\r\n    if (firstField) {\r\n        firstField.focus();\r\n    }\r\n    else {\r\n        element.focus();\r\n    }\r\n    element.addEventListener('keydown', on_keydown);\r\n}\r\nexports.showDialog = showDialog;\r\nfunction hideDialog(element) {\r\n    removeClassName(element, 'in');\r\n    addClassName(element, 'modal fade out');\r\n    element.removeEventListener('keydown', on_keydown);\r\n    return new Promise((reslove, reject) => {\r\n        setTimeout(() => {\r\n            element.style.removeProperty('display');\r\n            reslove({});\r\n        }, 1000);\r\n    });\r\n}\r\nexports.hideDialog = hideDialog;\r\nfunction on_keydown(event) {\r\n    const KEY_CODE_ESC = 27;\r\n    if (event.keyCode == KEY_CODE_ESC) {\r\n        let dialogElement = findDialogElement(event.target);\r\n        console.assert(dialogElement != null);\r\n        if (dialogElement.getAttribute('data-keyboard') == 'false')\r\n            return;\r\n        hideDialog(dialogElement);\r\n    }\r\n}\r\nfunction findDialogElement(e) {\r\n    while (e) {\r\n        let names = e.className.split(' ').filter(o => o);\r\n        if (names.indexOf('modal') >= 0)\r\n            return e;\r\n        e = e.parentElement;\r\n    }\r\n}\r\nconst alertElementId = \"AA0321E3-B2E4-4971-99D8-BF2FF66748F2\";\r\nlet alertElement = document.getElementById(alertElementId);\r\nif (alertElement == null) {\r\n    alertElement = document.createElement('div');\r\n    alertElement.id = alertElementId;\r\n    dialogContainer().appendChild(alertElement);\r\n    alertElement.innerHTML = `\r\n        <div class=\"modal-dialog\">\r\n            \r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                    </button>\r\n                    <h4 class=\"modal-title\"></h4>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <h5></h5>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\nfunction alert(args) {\r\n    if (typeof args == 'string') {\r\n        args = { title: '&nbsp;', message: args };\r\n    }\r\n    showDialog(alertElement);\r\n    let titleElement = alertElement.querySelector('.modal-title');\r\n    titleElement.innerHTML = args.title;\r\n    let bodyElement = alertElement.querySelector('.modal-body');\r\n    bodyElement.innerHTML = args.message;\r\n    let modalFooter = alertElement.querySelector('.modal-footer');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    okButton.innerHTML = args.confirmText || \"确定\";\r\n    okButton.onclick = () => hideDialog(alertElement);\r\n}\r\nexports.alert = alert;\r\nconst elementId = \"C3139D58-75F7-47B2-AEC4-76C3658848A0\";\r\nlet confirmDialogElment = document.getElementById(elementId);\r\nif (confirmDialogElment == null) {\r\n    confirmDialogElment = document.createElement('div');\r\n    confirmDialogElment.id = elementId;\r\n    confirmDialogElment.className = 'modal fade';\r\n    confirmDialogElment.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null');\r\n    confirmDialogElment.innerHTML = `\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                    <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                </button>\r\n                <h4 class=\"modal-title\">确认</h4>\r\n            </div>\r\n            <div class=\"modal-body form-horizontal\">\r\n               \r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button name=\"cancel\" type=\"button\" class=\"btn btn-default\">\r\n       \r\n                </button>\r\n                <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n    \r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n`;\r\n    dialogContainer().appendChild(confirmDialogElment);\r\n}\r\nfunction confirm(args) {\r\n    let title;\r\n    let message;\r\n    let execute = args.confirm;\r\n    let cancel = args.cancle || (() => Promise.resolve());\r\n    let container = args.container || document.body;\r\n    let confirmText = args.confirmText || '确定';\r\n    let cancelText = args.cancelText || '取消';\r\n    if (typeof args == 'string') {\r\n        message = args;\r\n    }\r\n    else {\r\n        title = args.title;\r\n        message = args.message;\r\n    }\r\n    let cancelElement = confirmDialogElment.querySelector('[name=\"cancel\"]');\r\n    cancelElement.innerHTML = cancelText;\r\n    let okElement = confirmDialogElment.querySelector('[name=\"ok\"]');\r\n    okElement.innerHTML = confirmText;\r\n    let modalHeader = confirmDialogElment.querySelector('.modal-header');\r\n    let modalBody = confirmDialogElment.querySelector('.modal-body');\r\n    let modalFooter = confirmDialogElment.querySelector('.modal-footer');\r\n    modalBody.innerHTML = `<h5>${message}</h5>`;\r\n    if (title) {\r\n        modalHeader.querySelector('h4').innerHTML = title;\r\n    }\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    let closeButton = modalHeader.querySelector('.close');\r\n    closeButton.onclick = cancelButton.onclick = function () {\r\n        cancel()\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        });\r\n    };\r\n    okButton.onclick = function (event) {\r\n        execute(event)\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        })\r\n            .catch(() => hideDialog(confirmDialogElment));\r\n    };\r\n    showDialog(confirmDialogElment);\r\n}\r\nexports.confirm = confirm;\r\nexports.showToastMessage = toast;\r\nfunction toast(obj) {\r\n    if (obj == null)\r\n        throw errors_1.errors.argumentNull('obj');\r\n    let msg;\r\n    let title;\r\n    if (typeof obj == 'object') {\r\n        if (obj.tagName == null) {\r\n            let options = obj;\r\n            msg = options.message;\r\n            title = options.title;\r\n        }\r\n        else {\r\n            msg = obj;\r\n        }\r\n    }\r\n    else {\r\n        msg = obj;\r\n    }\r\n    let dialogContainer = exports.dialogConfig.dialogContainer || document.body;\r\n    let toastDialogElement = document.createElement('div');\r\n    toastDialogElement.className = 'modal fade in';\r\n    toastDialogElement.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null.');\r\n    dialogContainer.appendChild(toastDialogElement);\r\n    let header = title ? `<div class=\"modal-header\">\r\n                                    <h4 class=\"modal-title\">${title}</h4>\r\n                               </div>` : '';\r\n    toastDialogElement.innerHTML = `\r\n                        <div class=\"modal-dialog\">\r\n                            <div class=\"modal-content\">\r\n                                ${header}\r\n                                <div class=\"modal-body form-horizontal\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n    let modalBody = toastDialogElement.querySelector('.modal-body');\r\n    console.assert(modalBody != null);\r\n    if (typeof msg == 'string') {\r\n        modalBody.innerHTML = `<h5>${msg}</h5>`;\r\n    }\r\n    else if (typeof msg == 'function') {\r\n        modalBody.innerHTML = `<h5>${msg()}</h5>`;\r\n    }\r\n    else\r\n        modalBody.appendChild(msg);\r\n    // let dialog = new Dialog(toastDialogElement);\r\n    // dialog.show();\r\n    showDialog(toastDialogElement);\r\n    setTimeout(() => {\r\n        hideDialog(toastDialogElement).then(() => {\r\n            toastDialogElement.remove();\r\n        });\r\n    }, 500);\r\n}\r\nexports.toast = toast;\r\nexports.showPanel = (function () {\r\n    let panel = document.createElement('div');\r\n    panel.className = 'mobile-page panel';\r\n    panel.style.display = 'none';\r\n    document.body.appendChild(panel);\r\n    panel.innerHTML = `\r\n            <div class=\"modal\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n    \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-backdrop in\">\r\n            </div>\r\n        `;\r\n    let modal = panel.querySelector('.modal');\r\n    let backdrop = panel.querySelector('.modal-backdrop');\r\n    let header = panel.querySelector('.modal-header');\r\n    let footer = panel.querySelector('.modal-footer');\r\n    let body = panel.querySelector(\".modal-body\");\r\n    let modalDialog = panel.querySelector(\".modal-dialog\");\r\n    let isIOS = navigator.userAgent.indexOf('iPhone') > 0 || navigator.userAgent.indexOf('iPad') > 0;\r\n    //=====================================================================\r\n    // 点击非窗口区域，关窗口。并禁用上级元素的 touch 操作。\r\n    // let panel = this.panel; //this.refs['panel'] as HTMLElement;\r\n    // let modalDialog = this.modalDialog; //this.refs['modalDialog'] as HTMLElement;\r\n    panel.addEventListener('touchstart', (event) => {\r\n        let dialogRect = modalDialog.getBoundingClientRect();\r\n        for (let i = 0; i < event.touches.length; i++) {\r\n            let { clientX } = event.touches[i];\r\n            if (clientX < dialogRect.left) {\r\n                hide();\r\n                return;\r\n            }\r\n        }\r\n    });\r\n    if (isIOS) {\r\n        panel.addEventListener('touchstart', (event) => {\r\n            let tagName = event.target.tagName;\r\n            if (tagName == 'BUTTON' || tagName == 'INPUT' || tagName == 'A') {\r\n                return;\r\n            }\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        });\r\n    }\r\n    function hide() {\r\n        modal.style.removeProperty('transform');\r\n        backdrop.style.opacity = '0';\r\n        window.setTimeout(() => {\r\n            panel.style.display = 'none';\r\n        }, 500);\r\n    }\r\n    return function showPanel(args) {\r\n        args = args || {};\r\n        panel.style.display = 'block';\r\n        modal.style.display = 'block';\r\n        setTimeout(() => {\r\n            modal.style.transform = 'translateX(0)';\r\n            backdrop.style.opacity = '0.5';\r\n        }, 50);\r\n        let setBodyHeight = () => {\r\n            let headerHeight = header.getBoundingClientRect().height;\r\n            let footerHeight = footer.getBoundingClientRect().height;\r\n            let bodyHeight = window.innerHeight - headerHeight - footerHeight;\r\n            body.style.height = `${bodyHeight}px`;\r\n        };\r\n        window.addEventListener('resize', () => setBodyHeight());\r\n        setBodyHeight();\r\n        if (args.header)\r\n            args.header(header);\r\n        if (args.body)\r\n            args.body(body);\r\n        if (args.footer)\r\n            args.footer(footer);\r\n        return {\r\n            hide: () => hide()\r\n        };\r\n    };\r\n})();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.errors = void 0;\r\nconst maishu_toolkit_1 = require(\"maishu-toolkit\");\r\nexports.errors = new maishu_toolkit_1.Errors();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fileToBase64 = exports.imageFileToBase64 = exports.loadImageConfig = exports.renderImage = exports.generateImageBase64 = exports.dialogConfig = exports.confirm = exports.alert = exports.toast = exports.hideDialog = exports.showDialog = exports.buttonOnClick = void 0;\r\nvar buttonOnClick_1 = require(\"./buttonOnClick\");\r\nObject.defineProperty(exports, \"buttonOnClick\", { enumerable: true, get: function () { return buttonOnClick_1.buttonOnClick; } });\r\nvar dialog_1 = require(\"./dialog\");\r\nObject.defineProperty(exports, \"showDialog\", { enumerable: true, get: function () { return dialog_1.showDialog; } });\r\nObject.defineProperty(exports, \"hideDialog\", { enumerable: true, get: function () { return dialog_1.hideDialog; } });\r\nObject.defineProperty(exports, \"toast\", { enumerable: true, get: function () { return dialog_1.toast; } });\r\nObject.defineProperty(exports, \"alert\", { enumerable: true, get: function () { return dialog_1.alert; } });\r\nObject.defineProperty(exports, \"confirm\", { enumerable: true, get: function () { return dialog_1.confirm; } });\r\nObject.defineProperty(exports, \"dialogConfig\", { enumerable: true, get: function () { return dialog_1.dialogConfig; } });\r\nvar image_1 = require(\"./image\");\r\nObject.defineProperty(exports, \"generateImageBase64\", { enumerable: true, get: function () { return image_1.generateImageBase64; } });\r\nObject.defineProperty(exports, \"renderImage\", { enumerable: true, get: function () { return image_1.renderImage; } });\r\nObject.defineProperty(exports, \"loadImageConfig\", { enumerable: true, get: function () { return image_1.loadImageConfig; } });\r\nObject.defineProperty(exports, \"imageFileToBase64\", { enumerable: true, get: function () { return image_1.imageFileToBase64; } });\r\nObject.defineProperty(exports, \"fileToBase64\", { enumerable: true, get: function () { return image_1.fileToBase64; } });\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.buttonOnClick = void 0;\r\nconst dialog_1 = require(\"./dialog\");\r\nfunction buttonOnClick(arg1, arg2, arg3) {\r\n    let element;\r\n    let callback;\r\n    let args;\r\n    if (typeof (arg1) == 'function') {\r\n        callback = arg1;\r\n        args = arg2;\r\n    }\r\n    else if (typeof (arg2) == 'function') {\r\n        element = arg1;\r\n        callback = arg2;\r\n        args = arg3;\r\n    }\r\n    else {\r\n        throw new Error(\"Arguments error\");\r\n    }\r\n    args = args || {};\r\n    let execute = (event) => __awaiter(this, void 0, void 0, function* () {\r\n        let button = event.currentTarget;\r\n        button.setAttribute('disabled', '');\r\n        try {\r\n            yield callback(event);\r\n            if (args.toast) {\r\n                dialog_1.toast(args.toast);\r\n            }\r\n        }\r\n        catch (exc) {\r\n            console.error(exc);\r\n            throw exc;\r\n        }\r\n        finally {\r\n            button.removeAttribute('disabled');\r\n        }\r\n    });\r\n    let result = function (event) {\r\n        event.stopPropagation();\r\n        event.cancelBubble = true;\r\n        if (!args.confirm) {\r\n            execute(event);\r\n            return;\r\n        }\r\n        let text = typeof args.confirm == 'string' ?\r\n            args.confirm :\r\n            args.confirm();\r\n        dialog_1.confirm({ message: text, confirm: (event) => execute(event) });\r\n    };\r\n    if (element)\r\n        element.onclick = result;\r\n    return result;\r\n}\r\nexports.buttonOnClick = buttonOnClick;\r\n","/*!\r\n * ~\r\n *  maishu-toolkit v1.6.2\r\n *  https://github.com/ansiboy/toolkit\r\n *  \r\n *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>\r\n *  Licensed under the MIT License.\r\n * \r\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof window === 'undefined' ? global : window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./out/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./out/assign-deep.js\":\n/*!****************************!*\\\n  !*** ./out/assign-deep.js ***!\n  \\****************************/\n/*! exports provided: objectAssignDeep, objectAssignDeepInto, withOptions */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"objectAssignDeep\", function() { return objectAssignDeep; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"objectAssignDeepInto\", function() { return objectAssignDeepInto; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"withOptions\", function() { return withOptions; });\n\r\n/*\r\n * OBJECT ASSIGN DEEP\r\n * Allows deep cloning of plain objects that contain primitives, nested plain objects, or nested plain arrays.\r\n */\r\n/*\r\n * A unified way of returning a string that describes the type of the given variable.\r\n */\r\nfunction getTypeOf(input) {\r\n    if (input === null) {\r\n        return 'null';\r\n    }\r\n    else if (typeof input === 'undefined') {\r\n        return 'undefined';\r\n    }\r\n    else if (typeof input === 'object') {\r\n        return (Array.isArray(input) ? 'array' : 'object');\r\n    }\r\n    return typeof input;\r\n}\r\n/*\r\n * Branching logic which calls the correct function to clone the given value base on its type.\r\n */\r\nfunction cloneValue(value) {\r\n    // The value is an object so lets clone it.\r\n    if (getTypeOf(value) === 'object') {\r\n        return quickCloneObject(value);\r\n    }\r\n    // The value is an array so lets clone it.\r\n    else if (getTypeOf(value) === 'array') {\r\n        return quickCloneArray(value);\r\n    }\r\n    // Any other value can just be copied.\r\n    return value;\r\n}\r\n/*\r\n * Enumerates the given array and returns a new array, with each of its values cloned (i.e. references broken).\r\n */\r\nfunction quickCloneArray(input) {\r\n    return input.map(cloneValue);\r\n}\r\n/*\r\n * Enumerates the properties of the given object (ignoring the prototype chain) and returns a new object, with each of\r\n * its values cloned (i.e. references broken).\r\n */\r\nfunction quickCloneObject(input) {\r\n    const output = {};\r\n    for (const key in input) {\r\n        if (!input.hasOwnProperty(key)) {\r\n            continue;\r\n        }\r\n        output[key] = cloneValue(input[key]);\r\n    }\r\n    return output;\r\n}\r\n/*\r\n * Does the actual deep merging.\r\n */\r\nfunction executeDeepMerge(target, _objects = [], _options = {}) {\r\n    const options = {\r\n        arrayBehaviour: _options.arrayBehaviour || 'replace',\r\n    };\r\n    // Ensure we have actual objects for each.\r\n    const objects = _objects.map(object => object || {});\r\n    const output = target || {};\r\n    // Enumerate the objects and their keys.\r\n    for (let oindex = 0; oindex < objects.length; oindex++) {\r\n        const object = objects[oindex];\r\n        const keys = Object.keys(object);\r\n        for (let kindex = 0; kindex < keys.length; kindex++) {\r\n            const key = keys[kindex];\r\n            const value = object[key];\r\n            const type = getTypeOf(value);\r\n            const existingValueType = getTypeOf(output[key]);\r\n            if (type === 'object') {\r\n                if (existingValueType !== 'undefined') {\r\n                    const existingValue = (existingValueType === 'object' ? output[key] : {});\r\n                    output[key] = executeDeepMerge({}, [existingValue, quickCloneObject(value)], options);\r\n                }\r\n                else {\r\n                    output[key] = quickCloneObject(value);\r\n                }\r\n            }\r\n            else if (type === 'array') {\r\n                if (existingValueType === 'array') {\r\n                    const newValue = quickCloneArray(value);\r\n                    output[key] = (options.arrayBehaviour === 'merge' ? output[key].concat(newValue) : newValue);\r\n                }\r\n                else {\r\n                    output[key] = quickCloneArray(value);\r\n                }\r\n            }\r\n            else {\r\n                output[key] = value;\r\n            }\r\n        }\r\n    }\r\n    return output;\r\n}\r\n/*\r\n * Merge all the supplied objects into the target object, breaking all references, including those of nested objects\r\n * and arrays, and even objects nested inside arrays. The first parameter is not mutated unlike Object.assign().\r\n * Properties in later objects will always overwrite.\r\n */\r\nfunction objectAssignDeep(target, ...objects) {\r\n    return executeDeepMerge(target, objects);\r\n}\r\n;\r\n/*\r\n * Same as objectAssignDeep() except it doesn't mutate the target object and returns an entirely new object.\r\n */\r\nfunction objectAssignDeepInto(...objects) {\r\n    return executeDeepMerge({}, objects);\r\n}\r\n;\r\n/*\r\n * Allows an options object to be passed in to customise the behaviour of the function.\r\n */\r\nlet withOptions = function objectAssignDeepInto(target, objects, options) {\r\n    return executeDeepMerge(target, objects, options);\r\n};\r\n\n\n/***/ }),\n\n/***/ \"./out/callback.js\":\n/*!*************************!*\\\n  !*** ./out/callback.js ***!\n  \\*************************/\n/*! exports provided: Callback */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Callback\", function() { return Callback; });\nclass Callback {\r\n    constructor() {\r\n        this.funcs = new Array();\r\n    }\r\n    add(func) {\r\n        this.funcs.push(func);\r\n    }\r\n    remove(func) {\r\n        this.funcs = this.funcs.filter(o => o != func);\r\n    }\r\n    fire(args) {\r\n        this.funcs.forEach(o => o(args));\r\n    }\r\n    static create() {\r\n        return new Callback();\r\n    }\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/data.js\":\n/*!*********************!*\\\n  !*** ./out/data.js ***!\n  \\*********************/\n/*! exports provided: DataSource, DataSourceSelectArguments */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DataSource\", function() { return DataSource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DataSourceSelectArguments\", function() { return DataSourceSelectArguments; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./callback */ \"./out/callback.js\");\n\r\n\r\nlet errors = Object.assign(_errors__WEBPACK_IMPORTED_MODULE_0__[\"errors\"], {\r\n    dataSourceCanntInsert() {\r\n        return new Error(\"DataSource can not insert.\");\r\n    },\r\n    dataSourceCanntDelete() {\r\n        return new Error(\"DataSource can not delete.\");\r\n    },\r\n    dataSourceCanntUpdate() {\r\n        return new Error(\"DataSource can not update.\");\r\n    },\r\n    primaryKeyNull(key) {\r\n        let msg = `Primary key named '${key}' value is null.`;\r\n        return new Error(msg);\r\n    },\r\n    queryResultTypeError() {\r\n        let msg = `Query result type error.`;\r\n        return new Error(msg);\r\n    }\r\n});\r\nclass DataSource {\r\n    constructor(args) {\r\n        this.inserting = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"](); //callbacks1<DataSource<T>, T, number>();\r\n        this.inserted = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"]();\r\n        this.deleting = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"](); //callbacks<DataSource<T>, T>();\r\n        this.deleted = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"](); //callbacks<DataSource<T>, T>();\r\n        this.updating = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"]();\r\n        this.updated = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"]();\r\n        this.selecting = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"]();\r\n        this.selected = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"](); //callbacks<DataSource<T>, DataSourceSelectResult<T>>();\r\n        this.error = new _callback__WEBPACK_IMPORTED_MODULE_1__[\"Callback\"](); //callbacks<this, DataSourceError>();\r\n        this.args = args;\r\n        this.primaryKeys = args.primaryKeys || [];\r\n    }\r\n    ; //callbacks<DataSource<T>, DataSourceSelectArguments>();\r\n    get canDelete() {\r\n        return this.args.delete != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canInsert() {\r\n        return this.args.insert != null && this.primaryKeys.length > 0;\r\n    }\r\n    get canUpdate() {\r\n        return this.args.update != null && this.primaryKeys.length > 0;\r\n    }\r\n    executeInsert(item, args) {\r\n        return this.args.insert(item, args);\r\n    }\r\n    executeDelete(item, args) {\r\n        return this.args.delete(item, args);\r\n    }\r\n    executeUpdate(item, args) {\r\n        return this.args.update(item, args);\r\n    }\r\n    executeSelect(args) {\r\n        args = args || {};\r\n        return this.args.select(args);\r\n    }\r\n    insert(item, args, index) {\r\n        if (!this.canInsert)\r\n            throw errors.dataSourceCanntInsert();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        if (typeof args == 'number') {\r\n            index = args;\r\n            args = null;\r\n        }\r\n        this.inserting.fire({ sender: this, dataItem: item, index });\r\n        return this.executeInsert(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.inserted.fire({ sender: this, dataItem: item, index });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'insert');\r\n            throw exc;\r\n        });\r\n    }\r\n    delete(item, args) {\r\n        if (!this.canDelete)\r\n            throw errors.dataSourceCanntDelete();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.deleting.fire({ sender: this, dataItem: item });\r\n        return this.executeDelete(item, args).then((data) => {\r\n            this.deleted.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch(exc => {\r\n            this.processError(exc, 'delete');\r\n            throw exc;\r\n        });\r\n    }\r\n    update(item, args) {\r\n        if (!this.canUpdate)\r\n            throw errors.dataSourceCanntUpdate();\r\n        if (!item)\r\n            throw errors.argumentNull(\"item\");\r\n        this.checkPrimaryKeys(item);\r\n        this.updating.fire({ sender: this, dataItem: item });\r\n        return this.executeUpdate(item, args).then((data) => {\r\n            Object.assign(item, data);\r\n            this.updated.fire({ sender: this, dataItem: item });\r\n            return data;\r\n        }).catch((exc) => {\r\n            this.processError(exc, 'update');\r\n            throw exc;\r\n        });\r\n    }\r\n    isSameItem(theItem, otherItem) {\r\n        if (theItem == null)\r\n            throw errors.argumentNull('theItem');\r\n        if (otherItem == null)\r\n            throw errors.argumentNull('otherItem');\r\n        if (this.primaryKeys.length == 0)\r\n            return theItem == otherItem;\r\n        this.checkPrimaryKeys(theItem);\r\n        this.checkPrimaryKeys(otherItem);\r\n        for (let pk of this.primaryKeys) {\r\n            if (theItem[pk] != otherItem[pk])\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkPrimaryKeys(item) {\r\n        for (let key in item) {\r\n            if (item[key] == null && this.primaryKeys.indexOf(key) >= 0)\r\n                throw errors.primaryKeyNull(key);\r\n        }\r\n    }\r\n    select(args) {\r\n        args = args || {};\r\n        // fireCallback(this.selecting, this, args);\r\n        this.selecting.fire({ sender: this, selectArguments: args });\r\n        return this.executeSelect(args).then((data) => {\r\n            let dataItems;\r\n            let totalRowCount;\r\n            if (Array.isArray(data)) {\r\n                dataItems = data;\r\n                totalRowCount = data.length;\r\n            }\r\n            else if (data.dataItems !== undefined && data.totalRowCount !== undefined) {\r\n                dataItems = data.dataItems;\r\n                totalRowCount = data.totalRowCount;\r\n            }\r\n            else {\r\n                throw errors.queryResultTypeError();\r\n            }\r\n            this.selected.fire({ sender: this, selectResult: { totalRowCount, dataItems }, selectArguments: args });\r\n            return { totalRowCount, dataItems };\r\n        }).catch(exc => {\r\n            this.processError(exc, 'select');\r\n            throw exc;\r\n        });\r\n    }\r\n    processError(exc, method) {\r\n        exc.method = method;\r\n        this.error.fire({ sender: this, error: exc });\r\n        if (!exc.handled)\r\n            throw exc;\r\n    }\r\n}\r\nclass DataSourceSelectArguments {\r\n    constructor() {\r\n        this.startRowIndex = 0;\r\n        this.maximumRows = 2147483647;\r\n    }\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/deep-equal.js\":\n/*!***************************!*\\\n  !*** ./out/deep-equal.js ***!\n  \\***************************/\n/*! exports provided: deepEqual */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepEqual\", function() { return deepEqual; });\nfunction deepEqual(x, y) {\r\n    if (x === y) {\r\n        return true;\r\n    }\r\n    if ((typeof x == \"object\" && x != null) && (typeof y == \"object\" && y != null)) {\r\n        if (Object.keys(x).length != Object.keys(y).length)\r\n            return false;\r\n        for (var prop in x) {\r\n            if (y.hasOwnProperty(prop)) {\r\n                if (!deepEqual(x[prop], y[prop]))\r\n                    return false;\r\n            }\r\n            else\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/errors.js\":\n/*!***********************!*\\\n  !*** ./out/errors.js ***!\n  \\***********************/\n/*! exports provided: Errors, errors */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Errors\", function() { return Errors; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"errors\", function() { return errors; });\nclass Errors {\r\n    argumentNull(argumentName) {\r\n        let error = new Error(`Argument ${argumentName} cannt be null or emtpy.`);\r\n        let name = \"argumentNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    routeDataFieldNull(fieldName) {\r\n        let msg = `The ${fieldName} field of route data cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"routeDataFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentFieldNull(fieldName, argumentName) {\r\n        let msg = `The ${fieldName} field of ${argumentName} cannt be null.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentFieldNull\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n    argumentTypeIncorrect(argumentName, expectedType) {\r\n        let msg = `Argument ${argumentName} type error, expected type is ${expectedType}.`;\r\n        let error = new Error(msg);\r\n        let name = \"argumentTypeIncorrect\";\r\n        error.name = name;\r\n        return error;\r\n    }\r\n}\r\nlet errors = new Errors();\r\n\n\n/***/ }),\n\n/***/ \"./out/format-date.js\":\n/*!****************************!*\\\n  !*** ./out/format-date.js ***!\n  \\****************************/\n/*! exports provided: formatDate */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatDate\", function() { return formatDate; });\nfunction formatDate(date, showHourMinutes) {\r\n    if (typeof date == \"string\")\r\n        return date;\r\n    let d = date;\r\n    if (showHourMinutes)\r\n        return `${d.getFullYear()}-${d.getMonth()}-${d.getDate()} ${d.getHours() + 1}:${d.getMinutes()}`;\r\n    return `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`;\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/guid.js\":\n/*!*********************!*\\\n  !*** ./out/guid.js ***!\n  \\*********************/\n/*! exports provided: guid */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"guid\", function() { return guid; });\nfunction guid() {\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16)\r\n            .substring(1);\r\n    }\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n        s4() + '-' + s4() + s4() + s4();\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/html.js\":\n/*!*********************!*\\\n  !*** ./out/html.js ***!\n  \\*********************/\n/*! exports provided: HTML */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HTML\", function() { return HTML; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\n\r\nclass HTML {\r\n    static addClassName(element, addonClassName) {\r\n        if (element == null)\r\n            throw _errors__WEBPACK_IMPORTED_MODULE_0__[\"errors\"].argumentNull('element');\r\n        if (!addonClassName)\r\n            throw _errors__WEBPACK_IMPORTED_MODULE_0__[\"errors\"].argumentNull('addonClassName');\r\n        let sourceClassName;\r\n        if (typeof element == 'string')\r\n            sourceClassName = element;\r\n        else\r\n            sourceClassName = element.className;\r\n        sourceClassName = sourceClassName || '';\r\n        console.assert(addonClassName != null);\r\n        if (sourceClassName.indexOf(addonClassName) >= 0)\r\n            return sourceClassName;\r\n        let className = `${sourceClassName} ${addonClassName}`;\r\n        if (typeof element != 'string')\r\n            element.className = className;\r\n        return className;\r\n    }\r\n    static removeClassName(element, targetClassName) {\r\n        let sourceClassName;\r\n        if (typeof element == 'string')\r\n            sourceClassName = element;\r\n        else\r\n            sourceClassName = element.className || '';\r\n        if (sourceClassName.indexOf(targetClassName) < 0)\r\n            return sourceClassName;\r\n        sourceClassName = sourceClassName || '';\r\n        sourceClassName = sourceClassName.replace(new RegExp(targetClassName, 'g'), '');\r\n        sourceClassName = sourceClassName.trim();\r\n        if (typeof element != 'string')\r\n            element.className = sourceClassName;\r\n        return sourceClassName;\r\n    }\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/index.js\":\n/*!**********************!*\\\n  !*** ./out/index.js ***!\n  \\**********************/\n/*! exports provided: guid, pathConcat, Errors, errors, Callback, DataSource, DataSourceSelectArguments, parseUrl, deepEqual, objectAssignDeep, formatDate, HTML, ValueStore */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./guid */ \"./out/guid.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"guid\", function() { return _guid__WEBPACK_IMPORTED_MODULE_0__[\"guid\"]; });\n\n/* harmony import */ var _path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./path */ \"./out/path.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"pathConcat\", function() { return _path__WEBPACK_IMPORTED_MODULE_1__[\"pathConcat\"]; });\n\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ \"./out/errors.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Errors\", function() { return _errors__WEBPACK_IMPORTED_MODULE_2__[\"Errors\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"errors\", function() { return _errors__WEBPACK_IMPORTED_MODULE_2__[\"errors\"]; });\n\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./callback */ \"./out/callback.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Callback\", function() { return _callback__WEBPACK_IMPORTED_MODULE_3__[\"Callback\"]; });\n\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./data */ \"./out/data.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DataSource\", function() { return _data__WEBPACK_IMPORTED_MODULE_4__[\"DataSource\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DataSourceSelectArguments\", function() { return _data__WEBPACK_IMPORTED_MODULE_4__[\"DataSourceSelectArguments\"]; });\n\n/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./url */ \"./out/url.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"parseUrl\", function() { return _url__WEBPACK_IMPORTED_MODULE_5__[\"parseUrl\"]; });\n\n/* harmony import */ var _deep_equal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./deep-equal */ \"./out/deep-equal.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"deepEqual\", function() { return _deep_equal__WEBPACK_IMPORTED_MODULE_6__[\"deepEqual\"]; });\n\n/* harmony import */ var _assign_deep__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./assign-deep */ \"./out/assign-deep.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"objectAssignDeep\", function() { return _assign_deep__WEBPACK_IMPORTED_MODULE_7__[\"objectAssignDeep\"]; });\n\n/* harmony import */ var _format_date__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./format-date */ \"./out/format-date.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"formatDate\", function() { return _format_date__WEBPACK_IMPORTED_MODULE_8__[\"formatDate\"]; });\n\n/* harmony import */ var _html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./html */ \"./out/html.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"HTML\", function() { return _html__WEBPACK_IMPORTED_MODULE_9__[\"HTML\"]; });\n\n/* harmony import */ var _value_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./value-store */ \"./out/value-store.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ValueStore\", function() { return _value_store__WEBPACK_IMPORTED_MODULE_10__[\"ValueStore\"]; });\n\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ \"./out/path.js\":\n/*!*********************!*\\\n  !*** ./out/path.js ***!\n  \\*********************/\n/*! exports provided: pathConcat */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pathConcat\", function() { return pathConcat; });\n/** 连接多个路径 */\r\nfunction pathConcat(...paths) {\r\n    paths = paths || [];\r\n    if (paths.length == 0)\r\n        return \"\";\r\n    if (paths.length == 1) {\r\n        return paths[0];\r\n    }\r\n    let str = paths.join(\"/\");\r\n    // 将一个或多个的 / 或者 变为一个 /，例如：/shop/test// 转换为 /shop/test/\r\n    // 或者 D:\\shop\\test\\  转换为 D:/shop/test/\r\n    str = str.replace(/(\\/+|\\\\+)/g, '/');\r\n    //======================================================\r\n    // fixed 把 http:// https:// 变为 http:/ https:/ 的 BUG\r\n    str = str.replace(\"http:/\", \"http://\");\r\n    str = str.replace(\"https:/\", \"https://\");\r\n    //======================================================\r\n    return str;\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/url.js\":\n/*!********************!*\\\n  !*** ./out/url.js ***!\n  \\********************/\n/*! exports provided: parseUrl */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseUrl\", function() { return parseUrl; });\nfunction parseUrl(url) {\r\n    let i = url.indexOf(\"?\");\r\n    if (i < 0)\r\n        return {};\r\n    let query = url.substr(i + 1);\r\n    return pareeUrlQuery(query);\r\n}\r\nfunction pareeUrlQuery(query) {\r\n    let match, pl = /\\+/g, // Regex for replacing addition symbol with a space\r\n    search = /([^&=]+)=?([^&]*)/g, decode = function (s) {\r\n        return decodeURIComponent(s.replace(pl, \" \"));\r\n    };\r\n    let urlParams = {};\r\n    while (match = search.exec(query))\r\n        urlParams[decode(match[1])] = decode(match[2]);\r\n    return urlParams;\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./out/value-store.js\":\n/*!****************************!*\\\n  !*** ./out/value-store.js ***!\n  \\****************************/\n/*! exports provided: ValueStore */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValueStore\", function() { return ValueStore; });\n/**\r\n * 实现数据的存储，以及数据修改的通知\r\n */\r\nclass ValueStore {\r\n    constructor(value) {\r\n        this.items = new Array();\r\n        this._value = value;\r\n    }\r\n    attach(func, sender) {\r\n        if (this.value !== undefined) {\r\n            func(this.value, sender);\r\n        }\r\n        return this.add(func, sender);\r\n    }\r\n    add(func, sender) {\r\n        this.items.push({ func, sender });\r\n        return func;\r\n    }\r\n    remove(func) {\r\n        this.items = this.items.filter(o => o.func != func);\r\n    }\r\n    fire(value) {\r\n        this.items.forEach(o => o.func(value, o.sender));\r\n    }\r\n    get value() {\r\n        if (this._value === undefined)\r\n            return null;\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this._value = value;\r\n        this.fire(value);\r\n    }\r\n}\r\n\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=index.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fileToBase64 = exports.imageFileToBase64 = exports.renderImage = exports.generateImageBase64 = exports.loadImageConfig = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nexports.loadImageConfig = {\r\n    /** 图片显示的文字 */\r\n    imageDisaplyText: '',\r\n};\r\nlet config = exports.loadImageConfig;\r\nlet draws = {\r\n    text: (imageText, options) => {\r\n        return (ctx, canvasWidth, canvasHeight) => {\r\n            // let fontSize1 = Math.floor(canvasHeight / 3 * 0.8);\r\n            let fontSize = Math.floor((canvasWidth / imageText.length) * 0.6);\r\n            let bgColor = 'whitesmoke';\r\n            let textColor = '#999';\r\n            // let fontSize = Math.min(fontSize1, fontSize2);\r\n            options = Object.assign({\r\n                fontSize,\r\n                bgColor,\r\n                textColor\r\n            }, options);\r\n            ctx.fillStyle = options.bgColor; //'whitesmoke';\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n            // 设置字体\r\n            ctx.font = `Bold ${options.fontSize}px Arial`;\r\n            // 设置对齐方式\r\n            ctx.textAlign = \"left\";\r\n            // 设置填充颜色\r\n            ctx.fillStyle = options.textColor; //\"#999\";\r\n            let textWidth = fontSize * imageText.length;\r\n            let startX = Math.floor((canvasWidth - textWidth) * 0.5);\r\n            let startY = Math.floor((canvasHeight - options.fontSize) * 0.3);\r\n            // 设置字体内容，以及在画布上的位置\r\n            ctx.fillText(imageText, startX, Math.floor(canvasHeight * 0.6));\r\n        };\r\n    }\r\n};\r\nfunction generateImageBase64(width, height, obj, options) {\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = width; //img_width;\r\n    canvas.height = height; //img_height;\r\n    var ctx = canvas.getContext('2d');\r\n    let draw = typeof obj == 'string' ? draws.text(obj, options) : obj;\r\n    draw(ctx, width, height);\r\n    return canvas.toDataURL();\r\n}\r\nexports.generateImageBase64 = generateImageBase64;\r\nconst PREVIEW_IMAGE_DEFAULT_WIDTH = 200;\r\nconst PREVIEW_IMAGE_DEFAULT_HEIGHT = 200;\r\n/**\r\n * 在 IMG 元素上渲染图片\r\n * @param element 要渲染的 IMG 元素\r\n * @param options 渲染选项，默认将 IMG 元素的 SRC 属性渲染出来\r\n */\r\nfunction renderImage(element, options) {\r\n    options = options || {};\r\n    if (!element)\r\n        throw errors_1.errors.argumentNull('element');\r\n    let imageUrl = element.src || '';\r\n    if (imageUrl.indexOf('data:image/png;base64') == 0 || element['rendered']) {\r\n        return;\r\n    }\r\n    element.setAttribute(\"image-url\", imageUrl);\r\n    //====================================================\r\n    // 通过 URL 设置图片大小\r\n    if (imageUrl && !options.imageSize) {\r\n        var match = imageUrl.match(/_\\d+_\\d+/);\r\n        if (match && match.length > 0) {\r\n            var arr = match[0].split('_');\r\n            if (arr.length >= 2) {\r\n                var width = new Number(arr[1]).valueOf();\r\n                var height = new Number(arr[2]).valueOf();\r\n                options.imageSize = { width, height };\r\n            }\r\n        }\r\n    }\r\n    //====================================================\r\n    options.imageSize = options.imageSize || { width: PREVIEW_IMAGE_DEFAULT_WIDTH, height: PREVIEW_IMAGE_DEFAULT_HEIGHT };\r\n    //====================================================\r\n    if (!options.imageText) {\r\n        options.imageText = element.title || '';\r\n        ;\r\n    }\r\n    let s = options.imageSize;\r\n    //设置默认的图片\r\n    var src_replace = generateImageBase64(s.width, s.height, draws.text(options.imageText || config.imageDisaplyText)); //getPreviewImage(imageText || config.imageDisaplyText, img_width, img_height);\r\n    element.setAttribute('src', src_replace);\r\n    return new Promise((resolve, reject) => {\r\n        if (options.loadImage) {\r\n            options.loadImage()\r\n                .then(base64 => base64 ? Promise.resolve(base64) : Promise.reject({}))\r\n                .catch(() => {\r\n                let base64 = generateImageBase64(s.width, s.height, draws.text('加载图片失败', { fontSize: 24 }));\r\n                return Promise.resolve(base64);\r\n            })\r\n                .then((base64) => {\r\n                element.src = base64;\r\n                element['rendered'] = true;\r\n            });\r\n        }\r\n        else {\r\n            var image = new Image();\r\n            image.onload = function () {\r\n                element.src = this.src;\r\n                element['rendered'] = true;\r\n                resolve(element.src);\r\n            };\r\n            image.src = imageUrl;\r\n        }\r\n    });\r\n}\r\nexports.renderImage = renderImage;\r\nfunction imageFileToBase64(imageFile, size) {\r\n    if (!imageFile)\r\n        throw errors_1.errors.argumentNull('imageFile');\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.readAsArrayBuffer(imageFile);\r\n        reader.onload = (ev) => {\r\n            var blob = new Blob([event.target['result']]);\r\n            window['URL'] = window['URL'] || window['webkitURL'];\r\n            var blobURL = window['URL'].createObjectURL(blob);\r\n            var image = new Image();\r\n            image.src = blobURL;\r\n            image.onload = () => {\r\n                var canvas = document.createElement('canvas');\r\n                size = size || {};\r\n                let width = size.width != null && size.width < image.width ? size.width : image.width;\r\n                let height = size.height != null && size.height < image.height ? size.height : image.height;\r\n                if (width != null && height == null) {\r\n                    height = width / image.width * image.height;\r\n                }\r\n                else if (width == null && height != null) {\r\n                    width = height / image.height * image.width;\r\n                }\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                var ctx = canvas.getContext(\"2d\");\r\n                ctx.drawImage(image, 0, 0, width, height);\r\n                let data = canvas.toDataURL(\"image/jpeg\", 0.5);\r\n                resolve({ base64: data, width, height });\r\n            };\r\n        };\r\n    });\r\n}\r\nexports.imageFileToBase64 = imageFileToBase64;\r\nfunction fileToBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n        let reader = new FileReader();\r\n        reader.onload = function () {\r\n            resolve(reader.result.toString());\r\n        };\r\n        reader.onerror = function () {\r\n            reject(reader.error);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    });\r\n}\r\nexports.fileToBase64 = fileToBase64;\r\n"],"sourceRoot":""}