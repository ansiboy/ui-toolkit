/*!
 * 
 *  maishu-ui-toolkit v1.6.0
 *  git+https://github.com/ansiboy/ui-toolkit.git
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
define(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);function l(){return t.dialogConfig.dialogContainer||document.body}function i(e,t){console.assert(null!=t,"class is null");let n=(e.className||"").split(/\s+/);var o=t.split(/\s+/).filter(e=>n.indexOf(e)<0);n.push(...o),e.className=n.join(" ")}function r(e,t){console.assert(null!=t,"class is null");let n=(e.className||"").split(/\s+/),o=t.split(/\s+/);var l=n.filter(e=>o.indexOf(e)<0);e.className=l.join(" ")}t.dialogConfig={dialogContainer:null};let a=new Array,s=new Array;function d(e,t){r(e,"out"),e.style.display="block",setTimeout(()=>{i(e,"modal fade in")},100);let n=a.indexOf(e);if(n<0){a.push(e),n=a.length-1;let t=e.querySelectorAll('[data-dismiss="modal"]')||[];for(let n=0;n<t.length;n++)t[n].onclick=(()=>c(e));let o=e.querySelectorAll("button");for(let e=0;e<o.length;e++)o.item(e).addEventListener("click",function(e){let t=s[n];t&&t(e.currentTarget)})}s[n]=t,e.tabIndex=1;var o=e.querySelector('input:not([type]),input:not([readonly])[type="text"],input:not([readonly])[type="password"]');o?o.focus():e.focus(),e.addEventListener("keydown",u)}function c(e){return r(e,"in"),i(e,"modal fade out"),e.removeEventListener("keydown",u),new Promise((t,n)=>{setTimeout(()=>{e.style.removeProperty("display"),t()},1e3)})}function u(e){if(27==e.keyCode){let t=function(e){for(;e;){let t=e.className.split(" ").filter(e=>e);if(t.indexOf("modal")>=0)return e;e=e.parentElement}}(e.target);if(console.assert(null!=t),"false"==t.getAttribute("data-keyboard"))return;c(t)}}function m(e){if(null==e)throw o.errors.argumentNull("obj");let n,l;if("object"==typeof e)if(null==e.tagName){let t=e;n=t.message,l=t.title}else n=e;else n=e;let i=t.dialogConfig.dialogContainer||document.body,r=document.createElement("div");r.className="modal fade in",r.style.marginTop="20px",console.assert(null!=i,"dialog container is null."),i.appendChild(r);let a=l?`<div class="modal-header">\n                                    <h4 class="modal-title">${l}</h4>\n                               </div>`:"";r.innerHTML=`\n                        <div class="modal-dialog">\n                            <div class="modal-content">\n                                ${a}\n                                <div class="modal-body form-horizontal">\n                                </div>\n                            </div>\n                        </div>\n                    `;let s=r.querySelector(".modal-body");console.assert(null!=s),"string"==typeof n?s.innerHTML=`<h5>${n}</h5>`:"function"==typeof n?s.innerHTML=`<h5>${n()}</h5>`:s.appendChild(n),d(r),setTimeout(()=>{c(r).then(()=>{r.remove()})},500)}t.showDialog=d,t.hideDialog=c,t.alert=function(e){let t=document.createElement("div");l().appendChild(t),"string"==typeof e&&(e={title:"&nbsp;",message:e}),t.innerHTML=`\n            <div class="modal-dialog">\n                \n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal">\n                            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                        </button>\n                        <h4 class="modal-title">${e.title}</h4>\n                    </div>\n                    <div class="modal-body">\n                        <h5>${e.message}</h5>\n                    </div>\n                    <div class="modal-footer">\n                        <button name="ok" type="button" class="btn btn-primary">\n                            确定\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `,d(t),t.querySelector(".modal-title");let n=t.querySelector(".modal-footer");n.querySelector('[name="cancel"]'),n.querySelector('[name="ok"]').onclick=(()=>c(t))},t.confirm=function(e){let t,n,o,i=e.confirm,r=e.cancle||(()=>Promise.resolve()),a=(e.container||document.body,e.confirmText||"确定"),s=e.cancelText||"取消";"string"==typeof e?n=e:(t=e.title,n=e.message),(o=document.createElement("div")).className="modal fade",o.style.marginTop="20px",console.assert(null!=l,"dialog container is null"),l().appendChild(o),o.innerHTML=`\n                    <div class="modal-dialog">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <button type="button" class="close" data-dismiss="modal">\n                                    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                                </button>\n                                <h4 class="modal-title">确认</h4>\n                            </div>\n                            <div class="modal-body form-horizontal">\n                               \n                            </div>\n                            <div class="modal-footer">\n                                <button name="cancel" type="button" class="btn btn-default">\n                                    ${s}\n                                </button>\n                                <button name="ok" type="button" class="btn btn-primary">\n                                    ${a}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                `;let u=o.querySelector(".modal-header"),m=o.querySelector(".modal-body"),f=o.querySelector(".modal-footer");m.innerHTML=`<h5>${n}</h5>`,t&&(u.querySelector("h4").innerHTML=t);let g=f.querySelector('[name="cancel"]'),h=f.querySelector('[name="ok"]');u.querySelector(".close").onclick=g.onclick=function(){r().then(()=>c(o)).then(()=>{o.remove()})},h.onclick=function(e){i(e).then(()=>c(o)).then(()=>{o.remove()}).catch(()=>c(o))},d(o)},t.showToastMessage=m,t.toast=m,t.showPanel=function(){let e=document.createElement("div");e.className="mobile-page panel",e.style.display="none",document.body.appendChild(e),e.innerHTML='\n            <div class="modal">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n    \n                        </div>\n                        <div class="modal-body">\n    \n                        </div>\n                        <div class="modal-footer">\n    \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-backdrop in">\n            </div>\n        ';let t=e.querySelector(".modal"),n=e.querySelector(".modal-backdrop"),o=e.querySelector(".modal-header"),l=e.querySelector(".modal-footer"),i=e.querySelector(".modal-body"),r=e.querySelector(".modal-dialog"),a=navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0;function s(){t.style.removeProperty("transform"),n.style.opacity="0",window.setTimeout(()=>{e.style.display="none"},500)}return e.addEventListener("touchstart",e=>{let t=r.getBoundingClientRect();for(let n=0;n<e.touches.length;n++){let{clientX:o}=e.touches[n];if(o<t.left)return void s()}}),a&&e.addEventListener("touchstart",e=>{let t=e.target.tagName;"BUTTON"!=t&&"INPUT"!=t&&"A"!=t&&(e.stopPropagation(),e.preventDefault())}),function(r){r=r||{},e.style.display="block",t.style.display="block",setTimeout(()=>{t.style.transform="translateX(0)",n.style.opacity="0.5"},50);let a=()=>{let e=o.getBoundingClientRect().height,t=l.getBoundingClientRect().height,n=window.innerHeight-e-t;i.style.height=`${n}px`};return window.addEventListener("resize",()=>a()),a(),r.header&&r.header(o),r.body&&r.body(i),r.footer&&r.footer(l),{hide:()=>s()}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors={argumentNull(e){let t=`Argumnet ${e} can not be null or empty.`,n=new Error;return n.message=t,n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.buttonOnClick=o.buttonOnClick;var l=n(0);t.showDialog=l.showDialog,t.hideDialog=l.hideDialog,t.toast=l.toast,t.alert=l.alert,t.confirm=l.confirm,t.dialogConfig=l.dialogConfig;var i=n(4);t.generateImageBase64=i.generateImageBase64,t.renderImage=i.renderImage,t.loadImageConfig=i.loadImageConfig,t.imageFileToBase64=i.imageFileToBase64,t.fileToBase64=i.fileToBase64},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(l,i){function r(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const l=n(0);t.buttonOnClick=function(e,t,n){let i,r,a;if("function"==typeof e)r=e,a=t;else{if("function"!=typeof t)throw new Error("Arguments error");i=e,r=t,a=n}a=a||{};let s=e=>o(this,void 0,void 0,function*(){let t=e.currentTarget;t.setAttribute("disabled","");try{yield r(e),a.toast&&l.toast(a.toast)}catch(e){throw console.error(e),e}finally{t.removeAttribute("disabled")}}),d=function(e){if(e.stopPropagation(),e.cancelBubble=!0,!a.confirm)return void s(e);let t="string"==typeof a.confirm?a.confirm:a.confirm();l.confirm({message:t,confirm:e=>s(e)})};return i&&(i.onclick=d),d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.loadImageConfig={imageDisaplyText:""};let l=t.loadImageConfig,i={text:(e,t)=>(n,o,l)=>{let i=Math.floor(o/e.length*.6);t=Object.assign({fontSize:i,bgColor:"whitesmoke",textColor:"#999"},t),n.fillStyle=t.bgColor,n.fillRect(0,0,o,l),n.font=`Bold ${t.fontSize}px Arial`,n.textAlign="left",n.fillStyle=t.textColor;let r=i*e.length,a=Math.floor(.5*(o-r));Math.floor(.3*(l-t.fontSize));n.fillText(e,a,Math.floor(.6*l))}};function r(e,t,n,o){var l=document.createElement("canvas");l.width=e,l.height=t;var r=l.getContext("2d");return("string"==typeof n?i.text(n,o):n)(r,e,t),l.toDataURL()}t.generateImageBase64=r;const a=200,s=200;t.renderImage=function(e,t){if(t=t||{},!e)throw o.errors.argumentNull("element");let n=e.src||"";if(0==n.indexOf("data:image/png;base64")||e.rendered)return;if(e.setAttribute("image-url",n),n&&!t.imageSize){var d=n.match(/_\d+_\d+/);if(d&&d.length>0){var c=d[0].split("_");if(c.length>=2){var u=new Number(c[1]).valueOf(),m=new Number(c[2]).valueOf();t.imageSize={width:u,height:m}}}}t.imageSize=t.imageSize||{width:a,height:s},t.imageText||(t.imageText=e.title||"");let f=t.imageSize;var g=r(f.width,f.height,i.text(t.imageText||l.imageDisaplyText));return e.setAttribute("src",g),new Promise((o,l)=>{if(t.loadImage)t.loadImage().then(e=>e?Promise.resolve(e):Promise.reject({})).catch(()=>{let e=r(f.width,f.height,i.text("加载图片失败",{fontSize:24}));return Promise.resolve(e)}).then(t=>{e.src=t,e.rendered=!0});else{var a=new Image;a.onload=function(){e.src=this.src,e.rendered=!0,o(e.src)},a.src=n}})},t.imageFileToBase64=function(e,t){if(!e)throw o.errors.argumentNull("imageFile");return new Promise((n,o)=>{var l=new FileReader;l.readAsArrayBuffer(e),l.onload=(e=>{var o=new Blob([event.target.result]);window.URL=window.URL||window.webkitURL;var l=window.URL.createObjectURL(o),i=new Image;i.src=l,i.onload=(()=>{var e=document.createElement("canvas");let o=null!=(t=t||{}).width&&t.width<i.width?t.width:i.width,l=null!=t.height&&t.height<i.height?t.height:i.height;null!=o&&null==l?l=o/i.width*i.height:null==o&&null!=l&&(o=l/i.height*i.width),e.width=o,e.height=l,e.getContext("2d").drawImage(i,0,0,o,l);let r=e.toDataURL("image/jpeg",.5);n({base64:r,width:o,height:l})})})})},t.fileToBase64=function(e){return new Promise((t,n)=>{let o=new FileReader;o.onload=function(){t(o.result.toString())},o.onerror=function(){n(o.error)},o.readAsDataURL(e)})}}])});
//# sourceMappingURL=index.min.js.map