/*!
 * 
 *  maishu-ui-toolkit v1.5.0
 *  git+https://github.com/ansiboy/ui-toolkit.git
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);function i(){return t.dialogConfig.dialogContainer||document.body}function l(e,t){console.assert(null!=t,"class is null");var n=(e.className||"").split(/\s+/),o=t.split(/\s+/).filter(function(e){return n.indexOf(e)<0});n.push.apply(n,r(o)),e.className=n.join(" ")}function c(e,t){console.assert(null!=t,"class is null");var n=(e.className||"").split(/\s+/),o=t.split(/\s+/),r=n.filter(function(e){return o.indexOf(e)<0});e.className=r.join(" ")}t.dialogConfig={dialogContainer:null};var s=new Array,u=new Array;function d(e,t){c(e,"out"),e.style.display="block",setTimeout(function(){l(e,"modal fade in")},100);var n=s.indexOf(e);if(n<0){s.push(e),n=s.length-1;for(var o=e.querySelectorAll('[data-dismiss="modal"]')||[],r=0;r<o.length;r++)o[r].onclick=function(){return f(e)};for(var a=e.querySelectorAll("button"),i=0;i<a.length;i++)a.item(i).addEventListener("click",function(e){var t=u[n];t&&t(e.currentTarget)})}u[n]=t,e.tabIndex=1;var d=e.querySelector('input:not([type]),input:not([readonly])[type="text"],input:not([readonly])[type="password"]');d?d.focus():e.focus(),e.addEventListener("keydown",m)}function f(e){return c(e,"in"),l(e,"modal fade out"),e.removeEventListener("keydown",m),new Promise(function(t,n){setTimeout(function(){e.style.removeProperty("display"),t()},1e3)})}function m(e){if(27==e.keyCode){var t=function(e){for(;e;){var t=e.className.split(" ").filter(function(e){return e});if(t.indexOf("modal")>=0)return e;e=e.parentElement}}(e.target);if(console.assert(null!=t),"false"==t.getAttribute("data-keyboard"))return;f(t)}}function g(e){if(null==e)throw a.errors.argumentNull("obj");var n,r;if("object"==o(e))if(null==e.tagName){var i=e;n=i.message,r=i.title}else n=e;else n=e;var l=t.dialogConfig.dialogContainer||document.body,c=document.createElement("div");c.className="modal fade in",c.style.marginTop="20px",console.assert(null!=l,"dialog container is null."),l.appendChild(c);var s=r?'<div class="modal-header">\n                                    <h4 class="modal-title">'.concat(r,"</h4>\n                               </div>"):"";c.innerHTML='\n                        <div class="modal-dialog">\n                            <div class="modal-content">\n                                '.concat(s,'\n                                <div class="modal-body form-horizontal">\n                                </div>\n                            </div>\n                        </div>\n                    ');var u=c.querySelector(".modal-body");console.assert(null!=u),"string"==typeof n?u.innerHTML="<h5>".concat(n,"</h5>"):"function"==typeof n?u.innerHTML="<h5>".concat(n(),"</h5>"):u.appendChild(n),d(c),setTimeout(function(){f(c).then(function(){c.remove()})},500)}t.showDialog=d,t.hideDialog=f,t.alert=function(e){var t=document.createElement("div");i().appendChild(t),"string"==typeof e&&(e={title:"&nbsp;",message:e}),t.innerHTML='\n            <div class="modal-dialog">\n                \n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal">\n                            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                        </button>\n                        <h4 class="modal-title">'.concat(e.title,'</h4>\n                    </div>\n                    <div class="modal-body">\n                        <h5>').concat(e.message,'</h5>\n                    </div>\n                    <div class="modal-footer">\n                        <button name="ok" type="button" class="btn btn-primary">\n                            确定\n                        </button>\n                    </div>\n                </div>\n            </div>\n        '),d(t),t.querySelector(".modal-title");var n=t.querySelector(".modal-footer");n.querySelector('[name="cancel"]'),n.querySelector('[name="ok"]').onclick=function(){return f(t)}},t.confirm=function(e){var t,n,o,r=e.confirm,a=e.cancle||function(){return Promise.resolve()},l=(e.container||document.body,e.confirmText||"确定"),c=e.cancelText||"取消";"string"==typeof e?n=e:(t=e.title,n=e.message),(o=document.createElement("div")).className="modal fade",o.style.marginTop="20px",console.assert(null!=i,"dialog container is null"),i().appendChild(o),o.innerHTML='\n                    <div class="modal-dialog">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <button type="button" class="close" data-dismiss="modal">\n                                    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                                </button>\n                                <h4 class="modal-title">确认</h4>\n                            </div>\n                            <div class="modal-body form-horizontal">\n                               \n                            </div>\n                            <div class="modal-footer">\n                                <button name="cancel" type="button" class="btn btn-default">\n                                    '.concat(c,'\n                                </button>\n                                <button name="ok" type="button" class="btn btn-primary">\n                                    ').concat(l,"\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                ");var s=o.querySelector(".modal-header"),u=o.querySelector(".modal-body"),m=o.querySelector(".modal-footer");u.innerHTML="<h5>".concat(n,"</h5>"),t&&(s.querySelector("h4").innerHTML=t);var g=m.querySelector('[name="cancel"]'),v=m.querySelector('[name="ok"]');s.querySelector(".close").onclick=g.onclick=function(){a().then(function(){return f(o)}).then(function(){o.remove()})},v.onclick=function(e){r(e).then(function(){return f(o)}).then(function(){o.remove()}).catch(function(){return f(o)})},d(o)},t.showToastMessage=g,t.toast=g,t.showPanel=function(){var e=document.createElement("div");e.className="mobile-page panel",e.style.display="none",document.body.appendChild(e),e.innerHTML='\n            <div class="modal">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n    \n                        </div>\n                        <div class="modal-body">\n    \n                        </div>\n                        <div class="modal-footer">\n    \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-backdrop in">\n            </div>\n        ';var t=e.querySelector(".modal"),n=e.querySelector(".modal-backdrop"),o=e.querySelector(".modal-header"),r=e.querySelector(".modal-footer"),a=e.querySelector(".modal-body"),i=e.querySelector(".modal-dialog"),l=navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0;function c(){t.style.removeProperty("transform"),n.style.opacity="0",window.setTimeout(function(){e.style.display="none"},500)}return e.addEventListener("touchstart",function(e){for(var t=i.getBoundingClientRect(),n=0;n<e.touches.length;n++){if(e.touches[n].clientX<t.left)return void c()}}),l&&e.addEventListener("touchstart",function(e){var t=e.target.tagName;"BUTTON"!=t&&"INPUT"!=t&&"A"!=t&&(e.stopPropagation(),e.preventDefault())}),function(i){i=i||{},e.style.display="block",t.style.display="block",setTimeout(function(){t.style.transform="translateX(0)",n.style.opacity="0.5"},50);var l=function(){var e=o.getBoundingClientRect().height,t=r.getBoundingClientRect().height,n=window.innerHeight-e-t;a.style.height="".concat(n,"px")};return window.addEventListener("resize",function(){return l()}),l(),i.header&&i.header(o),i.body&&i.body(a),i.footer&&i.footer(r),{hide:function(){return c()}}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors={argumentNull:function(e){var t="Argumnet ".concat(e," can not be null or empty."),n=new Error;return n.message=t,n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.buttonOnClick=o.buttonOnClick;var r=n(0);t.showDialog=r.showDialog,t.hideDialog=r.hideDialog,t.toast=r.toast,t.alert=r.alert,t.confirm=r.confirm,t.dialogConfig=r.dialogConfig;var a=n(4);t.generateImageBase64=a.generateImageBase64,t.renderImage=a.renderImage,t.loadImageConfig=a.loadImageConfig,t.imageFileToBase64=a.imageFileToBase64,t.fileToBase64=a.fileToBase64},function(e,t,n){"use strict";var o=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function l(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.buttonOnClick=function(e,t,n){var a,i,l,c=this;if("function"==typeof e)i=e,l=t;else{if("function"!=typeof t)throw new Error("Arguments error");a=e,i=t,l=n}l=l||{};var s=function(e){return o(c,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.currentTarget).setAttribute("disabled",""),t.prev=2,t.next=5,i(e);case 5:l.toast&&r.toast(l.toast),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),console.error(t.t0),t.t0;case 12:return t.prev=12,n.removeAttribute("disabled"),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[2,8,12,15]])}))},u=function(e){if(e.stopPropagation(),e.cancelBubble=!0,l.confirm){var t="string"==typeof l.confirm?l.confirm:l.confirm();r.confirm({message:t,confirm:function(e){return s(e)}})}else s(e)};return a&&(a.onclick=u),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.loadImageConfig={imageDisaplyText:""};var r=t.loadImageConfig,a={text:function(e,t){return function(n,o,r){var a=Math.floor(o/e.length*.6);t=Object.assign({fontSize:a,bgColor:"whitesmoke",textColor:"#999"},t),n.fillStyle=t.bgColor,n.fillRect(0,0,o,r),n.font="Bold ".concat(t.fontSize,"px Arial"),n.textAlign="left",n.fillStyle=t.textColor;var i=a*e.length,l=Math.floor(.5*(o-i));Math.floor(.3*(r-t.fontSize));n.fillText(e,l,Math.floor(.6*r))}}};function i(e,t,n,o){var r=document.createElement("canvas");r.width=e,r.height=t;var i=r.getContext("2d");return("string"==typeof n?a.text(n,o):n)(i,e,t),r.toDataURL()}t.generateImageBase64=i;var l=200,c=200;t.renderImage=function(e,t){if(t=t||{},!e)throw o.errors.argumentNull("element");var n=e.src||"";if(0!=n.indexOf("data:image/png;base64")&&!e.rendered){if(e.setAttribute("image-url",n),n&&!t.imageSize){var s=n.match(/_\d+_\d+/);if(s&&s.length>0){var u=s[0].split("_");if(u.length>=2){var d=new Number(u[1]).valueOf(),f=new Number(u[2]).valueOf();t.imageSize={width:d,height:f}}}}t.imageSize=t.imageSize||{width:l,height:c},t.imageText||(t.imageText=e.title||"");var m=t.imageSize,g=i(m.width,m.height,a.text(t.imageText||r.imageDisaplyText));return e.setAttribute("src",g),new Promise(function(o,r){if(t.loadImage)t.loadImage().then(function(e){return e?Promise.resolve(e):Promise.reject({})}).catch(function(){var e=i(m.width,m.height,a.text("加载图片失败",{fontSize:24}));return Promise.resolve(e)}).then(function(t){e.src=t,e.rendered=!0});else{var l=new Image;l.onload=function(){e.src=this.src,e.rendered=!0,o(e.src)},l.src=n}})}},t.imageFileToBase64=function(e,t){if(!e)throw o.errors.argumentNull("imageFile");return new Promise(function(n,o){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){var o=new Blob([event.target.result]);window.URL=window.URL||window.webkitURL;var r=window.URL.createObjectURL(o),a=new Image;a.src=r,a.onload=function(){var e=document.createElement("canvas"),o=null!=(t=t||{}).width&&t.width<a.width?t.width:a.width,r=null!=t.height&&t.height<a.height?t.height:a.height;null!=o&&null==r?r=o/a.width*a.height:null==o&&null!=r&&(o=r/a.height*a.width),e.width=o,e.height=r,e.getContext("2d").drawImage(a,0,0,o,r);var i=e.toDataURL("image/jpeg",.5);n({base64:i,width:o,height:r})}}})},t.fileToBase64=function(e){return new Promise(function(t,n){var o=new FileReader;o.onload=function(){t(o.result.toString())},o.onerror=function(){n(o.error)},o.readAsDataURL(e)})}}]);
//# sourceMappingURL=index.es5.min.js.map