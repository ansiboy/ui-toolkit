/*!
 * 
 *  maishu-ui-toolkit v1.10.0
 *  git+https://github.com/ansiboy/ui-toolkit.git
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.showPanel=t.toast=t.showToastMessage=t.confirm=t.alert=t.hideDialog=t.showDialog=t.dialogConfig=void 0;var i=n(1);function a(){return t.dialogConfig.dialogContainer||document.body}function u(e,t){console.assert(null!=t,"class is null");var n=(e.className||"").split(/\s+/),r=t.split(/\s+/).filter((function(e){return n.indexOf(e)<0}));n.push.apply(n,o(r)),e.className=n.join(" ")}function l(e,t){console.assert(null!=t,"class is null");var n=(e.className||"").split(/\s+/),r=t.split(/\s+/),o=n.filter((function(e){return r.indexOf(e)<0}));e.className=o.join(" ")}t.dialogConfig={dialogContainer:null};var s=new Array,c=new Array;function d(e,t){l(e,"out"),e.style.display="block",setTimeout((function(){u(e,"modal fade in")}),100);var n=s.indexOf(e);if(n<0){s.push(e),n=s.length-1;for(var r=e.querySelectorAll('[data-dismiss="modal"]')||[],o=0;o<r.length;o++)r[o].onclick=function(){return f(e)};for(var i=e.querySelectorAll("button"),a=0;a<i.length;a++)i.item(a).addEventListener("click",(function(e){var t=c[n];t&&t(e.currentTarget)}))}c[n]=t,e.tabIndex=1;var d=e.querySelector('input:not([type]),input:not([readonly])[type="text"],input:not([readonly])[type="password"]');d?d.focus():e.focus(),e.addEventListener("keydown",m)}function f(e){return l(e,"in"),u(e,"modal fade out"),e.removeEventListener("keydown",m),new Promise((function(t,n){setTimeout((function(){e.style.removeProperty("display"),t({})}),1e3)}))}function m(e){if(27==e.keyCode){var t=function(e){for(;e;){if(e.className.split(" ").filter((function(e){return e})).indexOf("modal")>=0)return e;e=e.parentElement}}(e.target);if(console.assert(null!=t),"false"==t.getAttribute("data-keyboard"))return;f(t)}}t.showDialog=d,t.hideDialog=f;var h=document.getElementById("AA0321E3-B2E4-4971-99D8-BF2FF66748F2");null==h&&((h=document.createElement("div")).id="AA0321E3-B2E4-4971-99D8-BF2FF66748F2",a().appendChild(h),h.innerHTML='\n        <div class="modal-dialog">\n            \n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="btn close" data-dismiss="modal">\n                        <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                    </button>\n                    <h4 class="modal-title"></h4>\n                </div>\n                <div class="modal-body">\n                    <h5></h5>\n                </div>\n                <div class="modal-footer">\n                    <button name="ok" type="button" class="btn btn-primary">\n                    </button>\n                </div>\n            </div>\n        </div>\n    '),t.alert=function(e){"string"==typeof e&&(e={title:"&nbsp;",message:e}),d(h),h.querySelector(".modal-title").innerHTML=e.title,h.querySelector(".modal-body").innerHTML=e.message;var t=h.querySelector(".modal-footer").querySelector('[name="ok"]');t.innerHTML=e.confirmText||"确定",t.onclick=function(){return f(h)}};var g="C3139D58-75F7-47B2-AEC4-76C3658848A0",p=document.getElementById(g);function y(e){if(null==e)throw i.errors.argumentNull("obj");var n,o;if("object"==r(e))if(null==e.tagName){var a=e;n=a.message,o=a.title}else n=e;else n=e;var u=t.dialogConfig.dialogContainer||document.body,l=document.createElement("div");l.className="modal fade in",l.style.marginTop="20px",console.assert(null!=u,"dialog container is null."),u.appendChild(l);var s=o?'<div class="modal-header">\n                                    <h4 class="modal-title">'.concat(o,"</h4>\n                               </div>"):"";l.innerHTML='\n                        <div class="modal-dialog">\n                            <div class="modal-content">\n                                '.concat(s,'\n                                <div class="modal-body form-horizontal">\n                                </div>\n                            </div>\n                        </div>\n                    ');var c=l.querySelector(".modal-body");console.assert(null!=c),"string"==typeof n?c.innerHTML="<h5>".concat(n,"</h5>"):"function"==typeof n?c.innerHTML="<h5>".concat(n(),"</h5>"):c.appendChild(n),d(l),setTimeout((function(){f(l).then((function(){l.remove()}))}),500)}null==p&&((p=document.createElement("div")).id=g,p.className="modal fade",p.style.marginTop="20px",console.assert(null!=a,"dialog container is null"),p.innerHTML='\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="btn close" data-dismiss="modal">\n                    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>\n                </button>\n                <h4 class="modal-title">确认</h4>\n            </div>\n            <div class="modal-body form-horizontal">\n               \n            </div>\n            <div class="modal-footer">\n                <button name="cancel" type="button" class="btn btn-default">\n       \n                </button>\n                <button name="ok" type="button" class="btn btn-primary">\n    \n                </button>\n            </div>\n        </div>\n    </div>\n',a().appendChild(p)),t.confirm=function(e){var t,n,r=e.confirm,o=e.cancle||function(){return Promise.resolve()},i=(e.container||document.body,e.confirmText||"确定"),a=e.cancelText||"取消";"string"==typeof e?n=e:(t=e.title,n=e.message),p.querySelector('[name="cancel"]').innerHTML=a,p.querySelector('[name="ok"]').innerHTML=i;var u=p.querySelector(".modal-header"),l=p.querySelector(".modal-body"),s=p.querySelector(".modal-footer");l.innerHTML="<h5>".concat(n,"</h5>"),t&&(u.querySelector("h4").innerHTML=t);var c=s.querySelector('[name="cancel"]'),m=s.querySelector('[name="ok"]');u.querySelector(".close").onclick=c.onclick=function(){o().then((function(){return f(p)})).then((function(){p.remove()}))},m.onclick=function(e){r(e).then((function(){return f(p)})).then((function(){p.remove()})).catch((function(){return f(p)}))},d(p)},t.showToastMessage=y,t.toast=y,t.showPanel=function(){var e=document.createElement("div");e.className="mobile-page panel",e.style.display="none",document.body.appendChild(e),e.innerHTML='\n            <div class="modal">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n    \n                        </div>\n                        <div class="modal-body">\n    \n                        </div>\n                        <div class="modal-footer">\n    \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-backdrop in">\n            </div>\n        ';var t=e.querySelector(".modal"),n=e.querySelector(".modal-backdrop"),r=e.querySelector(".modal-header"),o=e.querySelector(".modal-footer"),i=e.querySelector(".modal-body"),a=e.querySelector(".modal-dialog"),u=navigator.userAgent.indexOf("iPhone")>0||navigator.userAgent.indexOf("iPad")>0;function l(){t.style.removeProperty("transform"),n.style.opacity="0",window.setTimeout((function(){e.style.display="none"}),500)}return e.addEventListener("touchstart",(function(e){for(var t=a.getBoundingClientRect(),n=0;n<e.touches.length;n++){if(e.touches[n].clientX<t.left)return void l()}})),u&&e.addEventListener("touchstart",(function(e){var t=e.target.tagName;"BUTTON"!=t&&"INPUT"!=t&&"A"!=t&&(e.stopPropagation(),e.preventDefault())})),function(a){a=a||{},e.style.display="block",t.style.display="block",setTimeout((function(){t.style.transform="translateX(0)",n.style.opacity="0.5"}),50);var u=function(){var e=r.getBoundingClientRect().height,t=o.getBoundingClientRect().height,n=window.innerHeight-e-t;i.style.height="".concat(n,"px")};return window.addEventListener("resize",(function(){return u()})),u(),a.header&&a.header(r),a.body&&a.body(i),a.footer&&a.footer(o),{hide:function(){return l()}}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors=void 0;var r=n(4);t.errors=new r.Errors},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=t.imageFileToBase64=t.loadImageConfig=t.renderImage=t.generateImageBase64=t.dialogConfig=t.confirm=t.alert=t.toast=t.hideDialog=t.showDialog=t.buttonOnClick=void 0;var r=n(3);Object.defineProperty(t,"buttonOnClick",{enumerable:!0,get:function(){return r.buttonOnClick}});var o=n(0);Object.defineProperty(t,"showDialog",{enumerable:!0,get:function(){return o.showDialog}}),Object.defineProperty(t,"hideDialog",{enumerable:!0,get:function(){return o.hideDialog}}),Object.defineProperty(t,"toast",{enumerable:!0,get:function(){return o.toast}}),Object.defineProperty(t,"alert",{enumerable:!0,get:function(){return o.alert}}),Object.defineProperty(t,"confirm",{enumerable:!0,get:function(){return o.confirm}}),Object.defineProperty(t,"dialogConfig",{enumerable:!0,get:function(){return o.dialogConfig}});var i=n(6);Object.defineProperty(t,"generateImageBase64",{enumerable:!0,get:function(){return i.generateImageBase64}}),Object.defineProperty(t,"renderImage",{enumerable:!0,get:function(){return i.renderImage}}),Object.defineProperty(t,"loadImageConfig",{enumerable:!0,get:function(){return i.loadImageConfig}}),Object.defineProperty(t,"imageFileToBase64",{enumerable:!0,get:function(){return i.imageFileToBase64}}),Object.defineProperty(t,"fileToBase64",{enumerable:!0,get:function(){return i.fileToBase64}})},function(e,t,n){"use strict";var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.buttonOnClick=void 0;var o=n(0);t.buttonOnClick=function(e,t,n){var i,a,u,l=this;if("function"==typeof e)a=e,u=t;else{if("function"!=typeof t)throw new Error("Arguments error");i=e,a=t,u=n}u=u||{};var s=function(e){return r(l,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.currentTarget).setAttribute("disabled",""),t.prev=2,t.next=5,a(e);case 5:u.toast&&o.toast(u.toast),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),console.error(t.t0),t.t0;case 12:return t.prev=12,n.removeAttribute("disabled"),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,8,12,15]])})))},c=function(e){if(e.stopPropagation(),e.cancelBubble=!0,u.confirm){var t="string"==typeof u.confirm?u.confirm:u.confirm();o.confirm({message:t,confirm:function(e){return s(e)}})}else s(e)};return i&&(i.onclick=c),c}},function(e,t,n){(function(t){
/*!
 * ~
 *  maishu-toolkit v1.6.2
 *  https://github.com/ansiboy/toolkit
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
var n;"undefined"==typeof window||window,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./out/index.js")}({"./out/assign-deep.js":
/*!****************************!*\
  !*** ./out/assign-deep.js ***!
  \****************************/
/*! exports provided: objectAssignDeep, objectAssignDeepInto, withOptions */function(e,t,n){"use strict";function r(e){return null===e?"null":void 0===e?"undefined":"object"==typeof e?Array.isArray(e)?"array":"object":typeof e}function o(e){return"object"===r(e)?a(e):"array"===r(e)?i(e):e}function i(e){return e.map(o)}function a(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));return t}function u(e,t=[],n={}){const o={arrayBehaviour:n.arrayBehaviour||"replace"},l=t.map(e=>e||{}),s=e||{};for(let e=0;e<l.length;e++){const t=l[e],n=Object.keys(t);for(let e=0;e<n.length;e++){const l=n[e],c=t[l],d=r(c),f=r(s[l]);if("object"===d)if("undefined"!==f){const e="object"===f?s[l]:{};s[l]=u({},[e,a(c)],o)}else s[l]=a(c);else if("array"===d)if("array"===f){const e=i(c);s[l]="merge"===o.arrayBehaviour?s[l].concat(e):e}else s[l]=i(c);else s[l]=c}}return s}function l(e,...t){return u(e,t)}function s(...e){return u({},e)}n.r(t),n.d(t,"objectAssignDeep",(function(){return l})),n.d(t,"objectAssignDeepInto",(function(){return s})),n.d(t,"withOptions",(function(){return c}));let c=function(e,t,n){return u(e,t,n)}},"./out/callback.js":
/*!*************************!*\
  !*** ./out/callback.js ***!
  \*************************/
/*! exports provided: Callback */function(e,t,n){"use strict";n.r(t),n.d(t,"Callback",(function(){return r}));class r{constructor(){this.funcs=new Array}add(e){this.funcs.push(e)}remove(e){this.funcs=this.funcs.filter(t=>t!=e)}fire(e){this.funcs.forEach(t=>t(e))}static create(){return new r}}},"./out/data.js":
/*!*********************!*\
  !*** ./out/data.js ***!
  \*********************/
/*! exports provided: DataSource, DataSourceSelectArguments */function(e,t,n){"use strict";n.r(t),n.d(t,"DataSource",(function(){return a})),n.d(t,"DataSourceSelectArguments",(function(){return u}));var r=n(/*! ./errors */"./out/errors.js"),o=n(/*! ./callback */"./out/callback.js");let i=Object.assign(r.errors,{dataSourceCanntInsert:()=>new Error("DataSource can not insert."),dataSourceCanntDelete:()=>new Error("DataSource can not delete."),dataSourceCanntUpdate:()=>new Error("DataSource can not update."),primaryKeyNull:e=>new Error(`Primary key named '${e}' value is null.`),queryResultTypeError:()=>new Error("Query result type error.")});class a{constructor(e){this.inserting=new o.Callback,this.inserted=new o.Callback,this.deleting=new o.Callback,this.deleted=new o.Callback,this.updating=new o.Callback,this.updated=new o.Callback,this.selecting=new o.Callback,this.selected=new o.Callback,this.error=new o.Callback,this.args=e,this.primaryKeys=e.primaryKeys||[]}get canDelete(){return null!=this.args.delete&&this.primaryKeys.length>0}get canInsert(){return null!=this.args.insert&&this.primaryKeys.length>0}get canUpdate(){return null!=this.args.update&&this.primaryKeys.length>0}executeInsert(e,t){return this.args.insert(e,t)}executeDelete(e,t){return this.args.delete(e,t)}executeUpdate(e,t){return this.args.update(e,t)}executeSelect(e){return e=e||{},this.args.select(e)}insert(e,t,n){if(!this.canInsert)throw i.dataSourceCanntInsert();if(!e)throw i.argumentNull("item");return"number"==typeof t&&(n=t,t=null),this.inserting.fire({sender:this,dataItem:e,index:n}),this.executeInsert(e,t).then(t=>(Object.assign(e,t),this.inserted.fire({sender:this,dataItem:e,index:n}),t)).catch(e=>{throw this.processError(e,"insert"),e})}delete(e,t){if(!this.canDelete)throw i.dataSourceCanntDelete();if(!e)throw i.argumentNull("item");return this.checkPrimaryKeys(e),this.deleting.fire({sender:this,dataItem:e}),this.executeDelete(e,t).then(t=>(this.deleted.fire({sender:this,dataItem:e}),t)).catch(e=>{throw this.processError(e,"delete"),e})}update(e,t){if(!this.canUpdate)throw i.dataSourceCanntUpdate();if(!e)throw i.argumentNull("item");return this.checkPrimaryKeys(e),this.updating.fire({sender:this,dataItem:e}),this.executeUpdate(e,t).then(t=>(Object.assign(e,t),this.updated.fire({sender:this,dataItem:e}),t)).catch(e=>{throw this.processError(e,"update"),e})}isSameItem(e,t){if(null==e)throw i.argumentNull("theItem");if(null==t)throw i.argumentNull("otherItem");if(0==this.primaryKeys.length)return e==t;this.checkPrimaryKeys(e),this.checkPrimaryKeys(t);for(let n of this.primaryKeys)if(e[n]!=t[n])return!1;return!0}checkPrimaryKeys(e){for(let t in e)if(null==e[t]&&this.primaryKeys.indexOf(t)>=0)throw i.primaryKeyNull(t)}select(e){return e=e||{},this.selecting.fire({sender:this,selectArguments:e}),this.executeSelect(e).then(t=>{let n,r;if(Array.isArray(t))n=t,r=t.length;else{if(void 0===t.dataItems||void 0===t.totalRowCount)throw i.queryResultTypeError();n=t.dataItems,r=t.totalRowCount}return this.selected.fire({sender:this,selectResult:{totalRowCount:r,dataItems:n},selectArguments:e}),{totalRowCount:r,dataItems:n}}).catch(e=>{throw this.processError(e,"select"),e})}processError(e,t){if(e.method=t,this.error.fire({sender:this,error:e}),!e.handled)throw e}}class u{constructor(){this.startRowIndex=0,this.maximumRows=2147483647}}},"./out/deep-equal.js":
/*!***************************!*\
  !*** ./out/deep-equal.js ***!
  \***************************/
/*! exports provided: deepEqual */function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var n in e){if(!t.hasOwnProperty(n))return!1;if(!r(e[n],t[n]))return!1}return!0}return!1}n.r(t),n.d(t,"deepEqual",(function(){return r}))},"./out/errors.js":
/*!***********************!*\
  !*** ./out/errors.js ***!
  \***********************/
/*! exports provided: Errors, errors */function(e,t,n){"use strict";n.r(t),n.d(t,"Errors",(function(){return r})),n.d(t,"errors",(function(){return o}));class r{argumentNull(e){let t=new Error(`Argument ${e} cannt be null or emtpy.`);return t.name="argumentNull",t}routeDataFieldNull(e){let t=new Error(`The ${e} field of route data cannt be null.`);return t.name="routeDataFieldNull",t}argumentFieldNull(e,t){let n=new Error(`The ${e} field of ${t} cannt be null.`);return n.name="argumentFieldNull",n}argumentTypeIncorrect(e,t){let n=new Error(`Argument ${e} type error, expected type is ${t}.`);return n.name="argumentTypeIncorrect",n}}let o=new r},"./out/format-date.js":
/*!****************************!*\
  !*** ./out/format-date.js ***!
  \****************************/
/*! exports provided: formatDate */function(e,t,n){"use strict";function r(e,t){if("string"==typeof e)return e;let n=e;return t?`${n.getFullYear()}-${n.getMonth()}-${n.getDate()} ${n.getHours()+1}:${n.getMinutes()}`:`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`}n.r(t),n.d(t,"formatDate",(function(){return r}))},"./out/guid.js":
/*!*********************!*\
  !*** ./out/guid.js ***!
  \*********************/
/*! exports provided: guid */function(e,t,n){"use strict";function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}n.r(t),n.d(t,"guid",(function(){return r}))},"./out/html.js":
/*!*********************!*\
  !*** ./out/html.js ***!
  \*********************/
/*! exports provided: HTML */function(e,t,n){"use strict";n.r(t),n.d(t,"HTML",(function(){return o}));var r=n(/*! ./errors */"./out/errors.js");class o{static addClassName(e,t){if(null==e)throw r.errors.argumentNull("element");if(!t)throw r.errors.argumentNull("addonClassName");let n;if(n="string"==typeof e?e:e.className,n=n||"",console.assert(null!=t),n.indexOf(t)>=0)return n;let o=`${n} ${t}`;return"string"!=typeof e&&(e.className=o),o}static removeClassName(e,t){let n;return n="string"==typeof e?e:e.className||"",n.indexOf(t)<0||(n=n||"",n=n.replace(new RegExp(t,"g"),""),n=n.trim(),"string"!=typeof e&&(e.className=n)),n}}},"./out/index.js":
/*!**********************!*\
  !*** ./out/index.js ***!
  \**********************/
/*! exports provided: guid, pathConcat, Errors, errors, Callback, DataSource, DataSourceSelectArguments, parseUrl, deepEqual, objectAssignDeep, formatDate, HTML, ValueStore */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./guid */"./out/guid.js");n.d(t,"guid",(function(){return r.guid}));var o=n(/*! ./path */"./out/path.js");n.d(t,"pathConcat",(function(){return o.pathConcat}));var i=n(/*! ./errors */"./out/errors.js");n.d(t,"Errors",(function(){return i.Errors})),n.d(t,"errors",(function(){return i.errors}));var a=n(/*! ./callback */"./out/callback.js");n.d(t,"Callback",(function(){return a.Callback}));var u=n(/*! ./data */"./out/data.js");n.d(t,"DataSource",(function(){return u.DataSource})),n.d(t,"DataSourceSelectArguments",(function(){return u.DataSourceSelectArguments}));var l=n(/*! ./url */"./out/url.js");n.d(t,"parseUrl",(function(){return l.parseUrl}));var s=n(/*! ./deep-equal */"./out/deep-equal.js");n.d(t,"deepEqual",(function(){return s.deepEqual}));var c=n(/*! ./assign-deep */"./out/assign-deep.js");n.d(t,"objectAssignDeep",(function(){return c.objectAssignDeep}));var d=n(/*! ./format-date */"./out/format-date.js");n.d(t,"formatDate",(function(){return d.formatDate}));var f=n(/*! ./html */"./out/html.js");n.d(t,"HTML",(function(){return f.HTML}));var m=n(/*! ./value-store */"./out/value-store.js");n.d(t,"ValueStore",(function(){return m.ValueStore}))},"./out/path.js":
/*!*********************!*\
  !*** ./out/path.js ***!
  \*********************/
/*! exports provided: pathConcat */function(e,t,n){"use strict";function r(...e){if(0==(e=e||[]).length)return"";if(1==e.length)return e[0];let t=e.join("/");return t=t.replace(/(\/+|\\+)/g,"/"),t=t.replace("http:/","http://"),t=t.replace("https:/","https://"),t}n.r(t),n.d(t,"pathConcat",(function(){return r}))},"./out/url.js":
/*!********************!*\
  !*** ./out/url.js ***!
  \********************/
/*! exports provided: parseUrl */function(e,t,n){"use strict";function r(e){let t=e.indexOf("?");return t<0?{}:function(e){let t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(n," "))},i={};for(;t=r.exec(e);)i[o(t[1])]=o(t[2]);return i}(e.substr(t+1))}n.r(t),n.d(t,"parseUrl",(function(){return r}))},"./out/value-store.js":
/*!****************************!*\
  !*** ./out/value-store.js ***!
  \****************************/
/*! exports provided: ValueStore */function(e,t,n){"use strict";n.r(t),n.d(t,"ValueStore",(function(){return r}));class r{constructor(e){this.items=new Array,this._value=e}attach(e,t){return void 0!==this.value&&e(this.value,t),this.add(e,t)}add(e,t){return this.items.push({func:e,sender:t}),e}remove(e){this.items=this.items.filter(t=>t.func!=e)}fire(e){this.items.forEach(t=>t.func(e,t.sender))}get value(){return void 0===this._value?null:this._value}set value(e){this._value=e,this.fire(e)}}}})},e.exports=n()}).call(this,n(5))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=t.imageFileToBase64=t.renderImage=t.generateImageBase64=t.loadImageConfig=void 0;var r=n(1);t.loadImageConfig={imageDisaplyText:""};var o=t.loadImageConfig,i=function(e,t){return function(n,r,o){var i=Math.floor(r/e.length*.6);t=Object.assign({fontSize:i,bgColor:"whitesmoke",textColor:"#999"},t),n.fillStyle=t.bgColor,n.fillRect(0,0,r,o),n.font="Bold ".concat(t.fontSize,"px Arial"),n.textAlign="left",n.fillStyle=t.textColor;var a=i*e.length,u=Math.floor(.5*(r-a));Math.floor(.3*(o-t.fontSize));n.fillText(e,u,Math.floor(.6*o))}};function a(e,t,n,r){var o=document.createElement("canvas");o.width=e,o.height=t;var a=o.getContext("2d");return("string"==typeof n?i(n,r):n)(a,e,t),o.toDataURL()}t.generateImageBase64=a;t.renderImage=function(e,t){if(t=t||{},!e)throw r.errors.argumentNull("element");var n=e.src||"";if(0!=n.indexOf("data:image/png;base64")&&!e.rendered){if(e.setAttribute("image-url",n),n&&!t.imageSize){var u=n.match(/_\d+_\d+/);if(u&&u.length>0){var l=u[0].split("_");if(l.length>=2){var s=new Number(l[1]).valueOf(),c=new Number(l[2]).valueOf();t.imageSize={width:s,height:c}}}}t.imageSize=t.imageSize||{width:200,height:200},t.imageText||(t.imageText=e.title||"");var d=t.imageSize,f=a(d.width,d.height,i(t.imageText||o.imageDisaplyText));return e.setAttribute("src",f),new Promise((function(r,o){if(t.loadImage)t.loadImage().then((function(e){return e?Promise.resolve(e):Promise.reject({})})).catch((function(){var e=a(d.width,d.height,i("加载图片失败",{fontSize:24}));return Promise.resolve(e)})).then((function(t){e.src=t,e.rendered=!0}));else{var u=new Image;u.onload=function(){e.src=this.src,e.rendered=!0,r(e.src)},u.src=n}}))}},t.imageFileToBase64=function(e,t){if(!e)throw r.errors.argumentNull("imageFile");return new Promise((function(n,r){var o=new FileReader;o.readAsArrayBuffer(e),o.onload=function(e){var r=new Blob([event.target.result]);window.URL=window.URL||window.webkitURL;var o=window.URL.createObjectURL(r),i=new Image;i.src=o,i.onload=function(){var e=document.createElement("canvas"),r=null!=(t=t||{}).width&&t.width<i.width?t.width:i.width,o=null!=t.height&&t.height<i.height?t.height:i.height;null!=r&&null==o?o=r/i.width*i.height:null==r&&null!=o&&(r=o/i.height*i.width),e.width=r,e.height=o,e.getContext("2d").drawImage(i,0,0,r,o);var a=e.toDataURL("image/jpeg",.5);n({base64:a,width:r,height:o})}}}))},t.fileToBase64=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result.toString())},r.onerror=function(){n(r.error)},r.readAsDataURL(e)}))}}])}));
//# sourceMappingURL=index.es5.min.js.map