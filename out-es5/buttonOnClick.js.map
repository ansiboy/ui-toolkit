{"version":3,"sources":["../out/buttonOnClick.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","dialog_1","require","buttonOnClick","arg1","arg2","arg3","element","callback","args","Error","execute","event","button","currentTarget","setAttribute","toast","console","error","removeAttribute","stopPropagation","cancelBubble","confirm","text","message","onclick"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst dialog_1 = require(\"./dialog\");\r\nfunction buttonOnClick(arg1, arg2, arg3) {\r\n    let element;\r\n    let callback;\r\n    let args;\r\n    if (typeof (arg1) == 'function') {\r\n        callback = arg1;\r\n        args = arg2;\r\n    }\r\n    else if (typeof (arg2) == 'function') {\r\n        element = arg1;\r\n        callback = arg2;\r\n        args = arg3;\r\n    }\r\n    else {\r\n        throw new Error(\"Arguments error\");\r\n    }\r\n    args = args || {};\r\n    let execute = (event) => __awaiter(this, void 0, void 0, function* () {\r\n        let button = event.currentTarget;\r\n        button.setAttribute('disabled', '');\r\n        try {\r\n            yield callback(event);\r\n            if (args.toast) {\r\n                dialog_1.toast(args.toast);\r\n            }\r\n        }\r\n        catch (exc) {\r\n            console.error(exc);\r\n            throw exc;\r\n        }\r\n        finally {\r\n            button.removeAttribute('disabled');\r\n        }\r\n    });\r\n    let result = function (event) {\r\n        event.stopPropagation();\r\n        event.cancelBubble = true;\r\n        if (!args.confirm) {\r\n            execute(event);\r\n            return;\r\n        }\r\n        let text = typeof args.confirm == 'string' ?\r\n            args.confirm :\r\n            args.confirm();\r\n        dialog_1.confirm({ message: text, confirm: (event) => execute(event) });\r\n    };\r\n    if (element)\r\n        element.onclick = result;\r\n    return result;\r\n}\r\nexports.buttonOnClick = buttonOnClick;\r\n"],"file":"buttonOnClick.js"}