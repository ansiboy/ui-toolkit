{"version":3,"sources":["../out/dialog.js"],"names":["Object","defineProperty","exports","value","showPanel","toast","showToastMessage","confirm","alert","hideDialog","showDialog","dialogConfig","errors_1","require","dialogContainer","document","body","addClassName","element","className","console","assert","c1","split","c2","itemsToAdd","filter","o","indexOf","push","join","removeClassName","itemsRemain","dialogElements","Array","dialogCallbacks","callback","style","display","setTimeout","dialogIndex","length","closeButtons","querySelectorAll","i","onclick","allButtons","item","addEventListener","event","currentTarget","tabIndex","firstField","querySelector","focus","on_keydown","removeEventListener","Promise","reslove","reject","removeProperty","KEY_CODE_ESC","keyCode","dialogElement","findDialogElement","target","getAttribute","e","names","parentElement","args","createElement","appendChild","title","message","innerHTML","titleElement","modalFooter","cancelButton","okButton","execute","cancel","cancle","resolve","container","confirmText","cancelText","confirmDialogElment","marginTop","modalHeader","modalBody","closeButton","then","remove","catch","obj","errors","argumentNull","msg","tagName","options","toastDialogElement","header","panel","modal","backdrop","footer","modalDialog","isIOS","navigator","userAgent","dialogRect","getBoundingClientRect","touches","clientX","left","hide","stopPropagation","preventDefault","opacity","window","transform","setBodyHeight","headerHeight","height","footerHeight","bodyHeight","innerHeight"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.showPanel = exports.toast = exports.showToastMessage = exports.confirm = exports.alert = exports.hideDialog = exports.showDialog = exports.dialogConfig = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nfunction dialogContainer() {\r\n    return exports.dialogConfig.dialogContainer || document.body;\r\n}\r\nexports.dialogConfig = {\r\n    dialogContainer: null\r\n};\r\nfunction addClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsToAdd = c2.filter(o => c1.indexOf(o) < 0);\r\n    c1.push(...itemsToAdd);\r\n    element.className = c1.join(' ');\r\n}\r\nfunction removeClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsRemain = c1.filter(o => c2.indexOf(o) < 0);\r\n    element.className = itemsRemain.join(' ');\r\n}\r\nlet dialogElements = new Array();\r\nlet dialogCallbacks = new Array();\r\n/** 弹窗\r\n * @param element bootstrap 的 modal 元素\r\n */\r\nfunction showDialog(element, callback) {\r\n    removeClassName(element, 'out');\r\n    element.style.display = 'block';\r\n    setTimeout(() => {\r\n        addClassName(element, 'modal fade in');\r\n    }, 100);\r\n    let dialogIndex = dialogElements.indexOf(element);\r\n    if (dialogIndex < 0) {\r\n        dialogElements.push(element);\r\n        dialogIndex = dialogElements.length - 1;\r\n        let closeButtons = element.querySelectorAll('[data-dismiss=\"modal\"]') || [];\r\n        for (let i = 0; i < closeButtons.length; i++) {\r\n            closeButtons[i].onclick = () => hideDialog(element);\r\n        }\r\n        let allButtons = element.querySelectorAll('button');\r\n        for (let i = 0; i < allButtons.length; i++) {\r\n            allButtons.item(i).addEventListener('click', function (event) {\r\n                let callback = dialogCallbacks[dialogIndex];\r\n                if (callback) {\r\n                    callback(event.currentTarget);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    dialogCallbacks[dialogIndex] = callback;\r\n    element.tabIndex = 1;\r\n    var firstField = element.querySelector('input:not([type]),input:not([readonly])[type=\"text\"],input:not([readonly])[type=\"password\"]');\r\n    if (firstField) {\r\n        firstField.focus();\r\n    }\r\n    else {\r\n        element.focus();\r\n    }\r\n    element.addEventListener('keydown', on_keydown);\r\n}\r\nexports.showDialog = showDialog;\r\nfunction hideDialog(element) {\r\n    removeClassName(element, 'in');\r\n    addClassName(element, 'modal fade out');\r\n    element.removeEventListener('keydown', on_keydown);\r\n    return new Promise((reslove, reject) => {\r\n        setTimeout(() => {\r\n            element.style.removeProperty('display');\r\n            reslove();\r\n        }, 1000);\r\n    });\r\n}\r\nexports.hideDialog = hideDialog;\r\nfunction on_keydown(event) {\r\n    const KEY_CODE_ESC = 27;\r\n    if (event.keyCode == KEY_CODE_ESC) {\r\n        let dialogElement = findDialogElement(event.target);\r\n        console.assert(dialogElement != null);\r\n        if (dialogElement.getAttribute('data-keyboard') == 'false')\r\n            return;\r\n        hideDialog(dialogElement);\r\n    }\r\n}\r\nfunction findDialogElement(e) {\r\n    while (e) {\r\n        let names = e.className.split(' ').filter(o => o);\r\n        if (names.indexOf('modal') >= 0)\r\n            return e;\r\n        e = e.parentElement;\r\n    }\r\n}\r\nfunction alert(args) {\r\n    let element = document.createElement('div');\r\n    dialogContainer().appendChild(element);\r\n    if (typeof args == 'string') {\r\n        args = { title: '&nbsp;', message: args };\r\n    }\r\n    element.innerHTML = `\r\n            <div class=\"modal-dialog\">\r\n                \r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                            <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                        </button>\r\n                        <h4 class=\"modal-title\">${args.title}</h4>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <h5>${args.message}</h5>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                            确定\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    // $(element).modal();\r\n    // $(element).on('hidden.bs.modal', () => {\r\n    //     $(element).remove();\r\n    // });\r\n    // var dialog = new Dialog(element);\r\n    // dialog.show();\r\n    showDialog(element);\r\n    let titleElement = element.querySelector('.modal-title');\r\n    let modalFooter = element.querySelector('.modal-footer');\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    okButton.onclick = () => hideDialog(element); //dialog.hide()\r\n}\r\nexports.alert = alert;\r\nfunction confirm(args) {\r\n    let title;\r\n    let message;\r\n    let execute = args.confirm;\r\n    let cancel = args.cancle || (() => Promise.resolve());\r\n    let container = args.container || document.body;\r\n    let confirmText = args.confirmText || '确定';\r\n    let cancelText = args.cancelText || '取消';\r\n    if (typeof args == 'string') {\r\n        message = args;\r\n    }\r\n    else {\r\n        title = args.title;\r\n        message = args.message;\r\n    }\r\n    let confirmDialogElment;\r\n    confirmDialogElment = document.createElement('div');\r\n    confirmDialogElment.className = 'modal fade';\r\n    confirmDialogElment.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null');\r\n    dialogContainer().appendChild(confirmDialogElment);\r\n    confirmDialogElment.innerHTML = `\r\n                    <div class=\"modal-dialog\">\r\n                        <div class=\"modal-content\">\r\n                            <div class=\"modal-header\">\r\n                                <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                                    <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                                </button>\r\n                                <h4 class=\"modal-title\">确认</h4>\r\n                            </div>\r\n                            <div class=\"modal-body form-horizontal\">\r\n                               \r\n                            </div>\r\n                            <div class=\"modal-footer\">\r\n                                <button name=\"cancel\" type=\"button\" class=\"btn btn-default\">\r\n                                    ${cancelText}\r\n                                </button>\r\n                                <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                                    ${confirmText}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n    let modalHeader = confirmDialogElment.querySelector('.modal-header');\r\n    let modalBody = confirmDialogElment.querySelector('.modal-body');\r\n    let modalFooter = confirmDialogElment.querySelector('.modal-footer');\r\n    modalBody.innerHTML = `<h5>${message}</h5>`;\r\n    if (title) {\r\n        modalHeader.querySelector('h4').innerHTML = title;\r\n    }\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    let closeButton = modalHeader.querySelector('.close');\r\n    closeButton.onclick = cancelButton.onclick = function () {\r\n        cancel()\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        });\r\n    };\r\n    okButton.onclick = function (event) {\r\n        execute(event)\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        })\r\n            .catch(() => hideDialog(confirmDialogElment));\r\n    };\r\n    showDialog(confirmDialogElment);\r\n}\r\nexports.confirm = confirm;\r\nexports.showToastMessage = toast;\r\nfunction toast(obj) {\r\n    if (obj == null)\r\n        throw errors_1.errors.argumentNull('obj');\r\n    let msg;\r\n    let title;\r\n    if (typeof obj == 'object') {\r\n        if (obj.tagName == null) {\r\n            let options = obj;\r\n            msg = options.message;\r\n            title = options.title;\r\n        }\r\n        else {\r\n            msg = obj;\r\n        }\r\n    }\r\n    else {\r\n        msg = obj;\r\n    }\r\n    let dialogContainer = exports.dialogConfig.dialogContainer || document.body;\r\n    let toastDialogElement = document.createElement('div');\r\n    toastDialogElement.className = 'modal fade in';\r\n    toastDialogElement.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null.');\r\n    dialogContainer.appendChild(toastDialogElement);\r\n    let header = title ? `<div class=\"modal-header\">\r\n                                    <h4 class=\"modal-title\">${title}</h4>\r\n                               </div>` : '';\r\n    toastDialogElement.innerHTML = `\r\n                        <div class=\"modal-dialog\">\r\n                            <div class=\"modal-content\">\r\n                                ${header}\r\n                                <div class=\"modal-body form-horizontal\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n    let modalBody = toastDialogElement.querySelector('.modal-body');\r\n    console.assert(modalBody != null);\r\n    if (typeof msg == 'string') {\r\n        modalBody.innerHTML = `<h5>${msg}</h5>`;\r\n    }\r\n    else if (typeof msg == 'function') {\r\n        modalBody.innerHTML = `<h5>${msg()}</h5>`;\r\n    }\r\n    else\r\n        modalBody.appendChild(msg);\r\n    // let dialog = new Dialog(toastDialogElement);\r\n    // dialog.show();\r\n    showDialog(toastDialogElement);\r\n    setTimeout(() => {\r\n        hideDialog(toastDialogElement).then(() => {\r\n            toastDialogElement.remove();\r\n        });\r\n    }, 500);\r\n}\r\nexports.toast = toast;\r\nexports.showPanel = (function () {\r\n    let panel = document.createElement('div');\r\n    panel.className = 'mobile-page panel';\r\n    panel.style.display = 'none';\r\n    document.body.appendChild(panel);\r\n    panel.innerHTML = `\r\n            <div class=\"modal\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n    \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-backdrop in\">\r\n            </div>\r\n        `;\r\n    let modal = panel.querySelector('.modal');\r\n    let backdrop = panel.querySelector('.modal-backdrop');\r\n    let header = panel.querySelector('.modal-header');\r\n    let footer = panel.querySelector('.modal-footer');\r\n    let body = panel.querySelector(\".modal-body\");\r\n    let modalDialog = panel.querySelector(\".modal-dialog\");\r\n    let isIOS = navigator.userAgent.indexOf('iPhone') > 0 || navigator.userAgent.indexOf('iPad') > 0;\r\n    //=====================================================================\r\n    // 点击非窗口区域，关窗口。并禁用上级元素的 touch 操作。\r\n    // let panel = this.panel; //this.refs['panel'] as HTMLElement;\r\n    // let modalDialog = this.modalDialog; //this.refs['modalDialog'] as HTMLElement;\r\n    panel.addEventListener('touchstart', (event) => {\r\n        let dialogRect = modalDialog.getBoundingClientRect();\r\n        for (let i = 0; i < event.touches.length; i++) {\r\n            let { clientX } = event.touches[i];\r\n            if (clientX < dialogRect.left) {\r\n                hide();\r\n                return;\r\n            }\r\n        }\r\n    });\r\n    if (isIOS) {\r\n        panel.addEventListener('touchstart', (event) => {\r\n            let tagName = event.target.tagName;\r\n            if (tagName == 'BUTTON' || tagName == 'INPUT' || tagName == 'A') {\r\n                return;\r\n            }\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        });\r\n    }\r\n    function hide() {\r\n        modal.style.removeProperty('transform');\r\n        backdrop.style.opacity = '0';\r\n        window.setTimeout(() => {\r\n            panel.style.display = 'none';\r\n        }, 500);\r\n    }\r\n    return function showPanel(args) {\r\n        args = args || {};\r\n        panel.style.display = 'block';\r\n        modal.style.display = 'block';\r\n        setTimeout(() => {\r\n            modal.style.transform = 'translateX(0)';\r\n            backdrop.style.opacity = '0.5';\r\n        }, 50);\r\n        let setBodyHeight = () => {\r\n            let headerHeight = header.getBoundingClientRect().height;\r\n            let footerHeight = footer.getBoundingClientRect().height;\r\n            let bodyHeight = window.innerHeight - headerHeight - footerHeight;\r\n            body.style.height = `${bodyHeight}px`;\r\n        };\r\n        window.addEventListener('resize', () => setBodyHeight());\r\n        setBodyHeight();\r\n        if (args.header)\r\n            args.header(header);\r\n        if (args.body)\r\n            args.body(body);\r\n        if (args.footer)\r\n            args.footer(footer);\r\n        return {\r\n            hide: () => hide()\r\n        };\r\n    };\r\n})();\r\n"],"file":"dialog.js"}