{"version":3,"sources":["../out/dialog.js"],"names":["Object","defineProperty","exports","value","showPanel","toast","showToastMessage","confirm","alert","hideDialog","showDialog","dialogConfig","errors_1","require","dialogContainer","document","body","addClassName","element","className","console","assert","c1","split","c2","itemsToAdd","filter","o","indexOf","push","join","removeClassName","itemsRemain","dialogElements","Array","dialogCallbacks","callback","style","display","setTimeout","dialogIndex","length","closeButtons","querySelectorAll","i","onclick","allButtons","item","addEventListener","event","currentTarget","tabIndex","firstField","querySelector","focus","on_keydown","removeEventListener","Promise","reslove","reject","removeProperty","KEY_CODE_ESC","keyCode","dialogElement","findDialogElement","target","getAttribute","e","names","parentElement","args","elementId","getElementById","createElement","id","appendChild","innerHTML","title","message","titleElement","bodyElement","modalFooter","okButton","confirmText","execute","cancel","cancle","resolve","container","cancelText","confirmDialogElment","marginTop","cancelElement","okElement","modalHeader","modalBody","cancelButton","closeButton","then","remove","catch","obj","errors","argumentNull","msg","tagName","options","toastDialogElement","header","panel","modal","backdrop","footer","modalDialog","isIOS","navigator","userAgent","dialogRect","getBoundingClientRect","touches","clientX","left","hide","stopPropagation","preventDefault","opacity","window","transform","setBodyHeight","headerHeight","height","footerHeight","bodyHeight","innerHeight"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.showPanel = exports.toast = exports.showToastMessage = exports.confirm = exports.alert = exports.hideDialog = exports.showDialog = exports.dialogConfig = void 0;\r\nconst errors_1 = require(\"./errors\");\r\nfunction dialogContainer() {\r\n    return exports.dialogConfig.dialogContainer || document.body;\r\n}\r\nexports.dialogConfig = {\r\n    dialogContainer: null\r\n};\r\nfunction addClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsToAdd = c2.filter(o => c1.indexOf(o) < 0);\r\n    c1.push(...itemsToAdd);\r\n    element.className = c1.join(' ');\r\n}\r\nfunction removeClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsRemain = c1.filter(o => c2.indexOf(o) < 0);\r\n    element.className = itemsRemain.join(' ');\r\n}\r\nlet dialogElements = new Array();\r\nlet dialogCallbacks = new Array();\r\n/** 弹窗\r\n * @param element bootstrap 的 modal 元素\r\n */\r\nfunction showDialog(element, callback) {\r\n    removeClassName(element, 'out');\r\n    element.style.display = 'block';\r\n    setTimeout(() => {\r\n        addClassName(element, 'modal fade in');\r\n    }, 100);\r\n    let dialogIndex = dialogElements.indexOf(element);\r\n    if (dialogIndex < 0) {\r\n        dialogElements.push(element);\r\n        dialogIndex = dialogElements.length - 1;\r\n        let closeButtons = element.querySelectorAll('[data-dismiss=\"modal\"]') || [];\r\n        for (let i = 0; i < closeButtons.length; i++) {\r\n            closeButtons[i].onclick = () => hideDialog(element);\r\n        }\r\n        let allButtons = element.querySelectorAll('button');\r\n        for (let i = 0; i < allButtons.length; i++) {\r\n            allButtons.item(i).addEventListener('click', function (event) {\r\n                let callback = dialogCallbacks[dialogIndex];\r\n                if (callback) {\r\n                    callback(event.currentTarget);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    dialogCallbacks[dialogIndex] = callback;\r\n    element.tabIndex = 1;\r\n    var firstField = element.querySelector('input:not([type]),input:not([readonly])[type=\"text\"],input:not([readonly])[type=\"password\"]');\r\n    if (firstField) {\r\n        firstField.focus();\r\n    }\r\n    else {\r\n        element.focus();\r\n    }\r\n    element.addEventListener('keydown', on_keydown);\r\n}\r\nexports.showDialog = showDialog;\r\nfunction hideDialog(element) {\r\n    removeClassName(element, 'in');\r\n    addClassName(element, 'modal fade out');\r\n    element.removeEventListener('keydown', on_keydown);\r\n    return new Promise((reslove, reject) => {\r\n        setTimeout(() => {\r\n            element.style.removeProperty('display');\r\n            reslove({});\r\n        }, 1000);\r\n    });\r\n}\r\nexports.hideDialog = hideDialog;\r\nfunction on_keydown(event) {\r\n    const KEY_CODE_ESC = 27;\r\n    if (event.keyCode == KEY_CODE_ESC) {\r\n        let dialogElement = findDialogElement(event.target);\r\n        console.assert(dialogElement != null);\r\n        if (dialogElement.getAttribute('data-keyboard') == 'false')\r\n            return;\r\n        hideDialog(dialogElement);\r\n    }\r\n}\r\nfunction findDialogElement(e) {\r\n    while (e) {\r\n        let names = e.className.split(' ').filter(o => o);\r\n        if (names.indexOf('modal') >= 0)\r\n            return e;\r\n        e = e.parentElement;\r\n    }\r\n}\r\nfunction alert(args) {\r\n    const elementId = \"AA0321E3-B2E4-4971-99D8-BF2FF66748F2\";\r\n    let element = document.getElementById(elementId);\r\n    if (element == null) {\r\n        element = document.createElement('div');\r\n        element.id = elementId;\r\n        dialogContainer().appendChild(element);\r\n        element.innerHTML = `\r\n            <div class=\"modal-dialog\">\r\n                \r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                            <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                        </button>\r\n                        <h4 class=\"modal-title\"></h4>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <h5></h5>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n    if (typeof args == 'string') {\r\n        args = { title: '&nbsp;', message: args };\r\n    }\r\n    showDialog(element);\r\n    let titleElement = element.querySelector('.modal-title');\r\n    titleElement.innerHTML = args.title;\r\n    let bodyElement = element.querySelector('.modal-body');\r\n    bodyElement.innerHTML = args.message;\r\n    let modalFooter = element.querySelector('.modal-footer');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    okButton.innerHTML = args.confirmText || \"确定\";\r\n    okButton.onclick = () => hideDialog(element);\r\n}\r\nexports.alert = alert;\r\nfunction confirm(args) {\r\n    let title;\r\n    let message;\r\n    let execute = args.confirm;\r\n    let cancel = args.cancle || (() => Promise.resolve());\r\n    let container = args.container || document.body;\r\n    let confirmText = args.confirmText || '确定';\r\n    let cancelText = args.cancelText || '取消';\r\n    if (typeof args == 'string') {\r\n        message = args;\r\n    }\r\n    else {\r\n        title = args.title;\r\n        message = args.message;\r\n    }\r\n    const elementId = \"C3139D58-75F7-47B2-AEC4-76C3658848A0\";\r\n    let confirmDialogElment = document.getElementById(elementId);\r\n    if (confirmDialogElment == null) {\r\n        confirmDialogElment = document.createElement('div');\r\n        confirmDialogElment.id = elementId;\r\n        confirmDialogElment.className = 'modal fade';\r\n        confirmDialogElment.style.marginTop = '20px';\r\n        console.assert(dialogContainer != null, 'dialog container is null');\r\n        confirmDialogElment.innerHTML = `\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <button type=\"button\" class=\"btn close\" data-dismiss=\"modal\">\r\n                        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                    </button>\r\n                    <h4 class=\"modal-title\">确认</h4>\r\n                </div>\r\n                <div class=\"modal-body form-horizontal\">\r\n                   \r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button name=\"cancel\" type=\"button\" class=\"btn btn-default\">\r\n           \r\n                    </button>\r\n                    <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n        \r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n        dialogContainer().appendChild(confirmDialogElment);\r\n    }\r\n    let cancelElement = confirmDialogElment.querySelector('[name=\"cancel\"]');\r\n    cancelElement.innerHTML = cancelText;\r\n    let okElement = confirmDialogElment.querySelector('[name=\"ok\"]');\r\n    okElement.innerHTML = confirmText;\r\n    let modalHeader = confirmDialogElment.querySelector('.modal-header');\r\n    let modalBody = confirmDialogElment.querySelector('.modal-body');\r\n    let modalFooter = confirmDialogElment.querySelector('.modal-footer');\r\n    modalBody.innerHTML = `<h5>${message}</h5>`;\r\n    if (title) {\r\n        modalHeader.querySelector('h4').innerHTML = title;\r\n    }\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    let closeButton = modalHeader.querySelector('.close');\r\n    closeButton.onclick = cancelButton.onclick = function () {\r\n        cancel()\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        });\r\n    };\r\n    okButton.onclick = function (event) {\r\n        execute(event)\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        })\r\n            .catch(() => hideDialog(confirmDialogElment));\r\n    };\r\n    showDialog(confirmDialogElment);\r\n}\r\nexports.confirm = confirm;\r\nexports.showToastMessage = toast;\r\nfunction toast(obj) {\r\n    if (obj == null)\r\n        throw errors_1.errors.argumentNull('obj');\r\n    let msg;\r\n    let title;\r\n    if (typeof obj == 'object') {\r\n        if (obj.tagName == null) {\r\n            let options = obj;\r\n            msg = options.message;\r\n            title = options.title;\r\n        }\r\n        else {\r\n            msg = obj;\r\n        }\r\n    }\r\n    else {\r\n        msg = obj;\r\n    }\r\n    let dialogContainer = exports.dialogConfig.dialogContainer || document.body;\r\n    let toastDialogElement = document.createElement('div');\r\n    toastDialogElement.className = 'modal fade in';\r\n    toastDialogElement.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null.');\r\n    dialogContainer.appendChild(toastDialogElement);\r\n    let header = title ? `<div class=\"modal-header\">\r\n                                    <h4 class=\"modal-title\">${title}</h4>\r\n                               </div>` : '';\r\n    toastDialogElement.innerHTML = `\r\n                        <div class=\"modal-dialog\">\r\n                            <div class=\"modal-content\">\r\n                                ${header}\r\n                                <div class=\"modal-body form-horizontal\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n    let modalBody = toastDialogElement.querySelector('.modal-body');\r\n    console.assert(modalBody != null);\r\n    if (typeof msg == 'string') {\r\n        modalBody.innerHTML = `<h5>${msg}</h5>`;\r\n    }\r\n    else if (typeof msg == 'function') {\r\n        modalBody.innerHTML = `<h5>${msg()}</h5>`;\r\n    }\r\n    else\r\n        modalBody.appendChild(msg);\r\n    // let dialog = new Dialog(toastDialogElement);\r\n    // dialog.show();\r\n    showDialog(toastDialogElement);\r\n    setTimeout(() => {\r\n        hideDialog(toastDialogElement).then(() => {\r\n            toastDialogElement.remove();\r\n        });\r\n    }, 500);\r\n}\r\nexports.toast = toast;\r\nexports.showPanel = (function () {\r\n    let panel = document.createElement('div');\r\n    panel.className = 'mobile-page panel';\r\n    panel.style.display = 'none';\r\n    document.body.appendChild(panel);\r\n    panel.innerHTML = `\r\n            <div class=\"modal\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n    \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-backdrop in\">\r\n            </div>\r\n        `;\r\n    let modal = panel.querySelector('.modal');\r\n    let backdrop = panel.querySelector('.modal-backdrop');\r\n    let header = panel.querySelector('.modal-header');\r\n    let footer = panel.querySelector('.modal-footer');\r\n    let body = panel.querySelector(\".modal-body\");\r\n    let modalDialog = panel.querySelector(\".modal-dialog\");\r\n    let isIOS = navigator.userAgent.indexOf('iPhone') > 0 || navigator.userAgent.indexOf('iPad') > 0;\r\n    //=====================================================================\r\n    // 点击非窗口区域，关窗口。并禁用上级元素的 touch 操作。\r\n    // let panel = this.panel; //this.refs['panel'] as HTMLElement;\r\n    // let modalDialog = this.modalDialog; //this.refs['modalDialog'] as HTMLElement;\r\n    panel.addEventListener('touchstart', (event) => {\r\n        let dialogRect = modalDialog.getBoundingClientRect();\r\n        for (let i = 0; i < event.touches.length; i++) {\r\n            let { clientX } = event.touches[i];\r\n            if (clientX < dialogRect.left) {\r\n                hide();\r\n                return;\r\n            }\r\n        }\r\n    });\r\n    if (isIOS) {\r\n        panel.addEventListener('touchstart', (event) => {\r\n            let tagName = event.target.tagName;\r\n            if (tagName == 'BUTTON' || tagName == 'INPUT' || tagName == 'A') {\r\n                return;\r\n            }\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        });\r\n    }\r\n    function hide() {\r\n        modal.style.removeProperty('transform');\r\n        backdrop.style.opacity = '0';\r\n        window.setTimeout(() => {\r\n            panel.style.display = 'none';\r\n        }, 500);\r\n    }\r\n    return function showPanel(args) {\r\n        args = args || {};\r\n        panel.style.display = 'block';\r\n        modal.style.display = 'block';\r\n        setTimeout(() => {\r\n            modal.style.transform = 'translateX(0)';\r\n            backdrop.style.opacity = '0.5';\r\n        }, 50);\r\n        let setBodyHeight = () => {\r\n            let headerHeight = header.getBoundingClientRect().height;\r\n            let footerHeight = footer.getBoundingClientRect().height;\r\n            let bodyHeight = window.innerHeight - headerHeight - footerHeight;\r\n            body.style.height = `${bodyHeight}px`;\r\n        };\r\n        window.addEventListener('resize', () => setBodyHeight());\r\n        setBodyHeight();\r\n        if (args.header)\r\n            args.header(header);\r\n        if (args.body)\r\n            args.body(body);\r\n        if (args.footer)\r\n            args.footer(footer);\r\n        return {\r\n            hide: () => hide()\r\n        };\r\n    };\r\n})();\r\n"],"file":"dialog.js"}