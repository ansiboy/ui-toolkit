{"version":3,"sources":["../out/dialog.js"],"names":["Object","defineProperty","exports","value","errors_1","require","dialogContainer","dialogConfig","document","body","addClassName","element","className","console","assert","c1","split","c2","itemsToAdd","filter","o","indexOf","push","join","removeClassName","itemsRemain","dialogElements","Array","dialogCallbacks","showDialog","callback","style","display","setTimeout","dialogIndex","length","closeButtons","querySelectorAll","i","onclick","hideDialog","allButtons","item","addEventListener","event","currentTarget","tabIndex","firstField","querySelector","focus","on_keydown","removeEventListener","Promise","reslove","reject","removeProperty","KEY_CODE_ESC","keyCode","dialogElement","findDialogElement","target","getAttribute","e","names","parentElement","alert","args","createElement","appendChild","title","message","innerHTML","titleElement","modalFooter","cancelButton","okButton","confirm","execute","cancel","cancle","resolve","container","confirmText","cancelText","confirmDialogElment","marginTop","modalHeader","modalBody","closeButton","then","remove","catch","showToastMessage","toast","obj","errors","argumentNull","msg","tagName","options","toastDialogElement","header","showPanel","panel","modal","backdrop","footer","modalDialog","isIOS","navigator","userAgent","dialogRect","getBoundingClientRect","touches","clientX","left","hide","stopPropagation","preventDefault","opacity","window","transform","setBodyHeight","headerHeight","height","footerHeight","bodyHeight","innerHeight"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst errors_1 = require(\"./errors\");\r\nfunction dialogContainer() {\r\n    return exports.dialogConfig.dialogContainer || document.body;\r\n}\r\nexports.dialogConfig = {\r\n    dialogContainer: null\r\n};\r\nfunction addClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsToAdd = c2.filter(o => c1.indexOf(o) < 0);\r\n    c1.push(...itemsToAdd);\r\n    element.className = c1.join(' ');\r\n}\r\nfunction removeClassName(element, className) {\r\n    console.assert(className != null, 'class is null');\r\n    let c1 = (element.className || '').split(/\\s+/);\r\n    let c2 = className.split(/\\s+/);\r\n    var itemsRemain = c1.filter(o => c2.indexOf(o) < 0);\r\n    element.className = itemsRemain.join(' ');\r\n}\r\nlet dialogElements = new Array();\r\nlet dialogCallbacks = new Array();\r\n/** 弹窗\r\n * @param element bootstrap 的 modal 元素\r\n */\r\nfunction showDialog(element, callback) {\r\n    removeClassName(element, 'out');\r\n    element.style.display = 'block';\r\n    setTimeout(() => {\r\n        addClassName(element, 'modal fade in');\r\n    }, 100);\r\n    let dialogIndex = dialogElements.indexOf(element);\r\n    if (dialogIndex < 0) {\r\n        dialogElements.push(element);\r\n        dialogIndex = dialogElements.length - 1;\r\n        let closeButtons = element.querySelectorAll('[data-dismiss=\"modal\"]') || [];\r\n        for (let i = 0; i < closeButtons.length; i++) {\r\n            closeButtons[i].onclick = () => hideDialog(element);\r\n        }\r\n        let allButtons = element.querySelectorAll('button');\r\n        for (let i = 0; i < allButtons.length; i++) {\r\n            allButtons.item(i).addEventListener('click', function (event) {\r\n                let callback = dialogCallbacks[dialogIndex];\r\n                if (callback) {\r\n                    callback(event.currentTarget);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    dialogCallbacks[dialogIndex] = callback;\r\n    element.tabIndex = 1;\r\n    var firstField = element.querySelector('input:not([type]),input:not([readonly])[type=\"text\"],input:not([readonly])[type=\"password\"]');\r\n    if (firstField) {\r\n        firstField.focus();\r\n    }\r\n    else {\r\n        element.focus();\r\n    }\r\n    element.addEventListener('keydown', on_keydown);\r\n}\r\nexports.showDialog = showDialog;\r\nfunction hideDialog(element) {\r\n    removeClassName(element, 'in');\r\n    addClassName(element, 'modal fade out');\r\n    element.removeEventListener('keydown', on_keydown);\r\n    return new Promise((reslove, reject) => {\r\n        setTimeout(() => {\r\n            element.style.removeProperty('display');\r\n            reslove();\r\n        }, 1000);\r\n    });\r\n}\r\nexports.hideDialog = hideDialog;\r\nfunction on_keydown(event) {\r\n    const KEY_CODE_ESC = 27;\r\n    if (event.keyCode == KEY_CODE_ESC) {\r\n        let dialogElement = findDialogElement(event.target);\r\n        console.assert(dialogElement != null);\r\n        if (dialogElement.getAttribute('data-keyboard') == 'false')\r\n            return;\r\n        hideDialog(dialogElement);\r\n    }\r\n}\r\nfunction findDialogElement(e) {\r\n    while (e) {\r\n        let names = e.className.split(' ').filter(o => o);\r\n        if (names.indexOf('modal') >= 0)\r\n            return e;\r\n        e = e.parentElement;\r\n    }\r\n}\r\nfunction alert(args) {\r\n    let element = document.createElement('div');\r\n    dialogContainer().appendChild(element);\r\n    if (typeof args == 'string') {\r\n        args = { title: '&nbsp;', message: args };\r\n    }\r\n    element.innerHTML = `\r\n            <div class=\"modal-dialog\">\r\n                \r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n                            <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                        </button>\r\n                        <h4 class=\"modal-title\">${args.title}</h4>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <h5>${args.message}</h5>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                            确定\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    // $(element).modal();\r\n    // $(element).on('hidden.bs.modal', () => {\r\n    //     $(element).remove();\r\n    // });\r\n    // var dialog = new Dialog(element);\r\n    // dialog.show();\r\n    showDialog(element);\r\n    let titleElement = element.querySelector('.modal-title');\r\n    let modalFooter = element.querySelector('.modal-footer');\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    okButton.onclick = () => hideDialog(element); //dialog.hide()\r\n}\r\nexports.alert = alert;\r\nfunction confirm(args) {\r\n    let title;\r\n    let message;\r\n    let execute = args.confirm;\r\n    let cancel = args.cancle || (() => Promise.resolve());\r\n    let container = args.container || document.body;\r\n    let confirmText = args.confirmText || '确定';\r\n    let cancelText = args.cancelText || '取消';\r\n    if (typeof args == 'string') {\r\n        message = args;\r\n    }\r\n    else {\r\n        title = args.title;\r\n        message = args.message;\r\n    }\r\n    let confirmDialogElment;\r\n    confirmDialogElment = document.createElement('div');\r\n    confirmDialogElment.className = 'modal fade';\r\n    confirmDialogElment.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null');\r\n    dialogContainer().appendChild(confirmDialogElment);\r\n    confirmDialogElment.innerHTML = `\r\n                    <div class=\"modal-dialog\">\r\n                        <div class=\"modal-content\">\r\n                            <div class=\"modal-header\">\r\n                                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n                                    <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span>\r\n                                </button>\r\n                                <h4 class=\"modal-title\">确认</h4>\r\n                            </div>\r\n                            <div class=\"modal-body form-horizontal\">\r\n                               \r\n                            </div>\r\n                            <div class=\"modal-footer\">\r\n                                <button name=\"cancel\" type=\"button\" class=\"btn btn-default\">\r\n                                    ${cancelText}\r\n                                </button>\r\n                                <button name=\"ok\" type=\"button\" class=\"btn btn-primary\">\r\n                                    ${confirmText}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n    let modalHeader = confirmDialogElment.querySelector('.modal-header');\r\n    let modalBody = confirmDialogElment.querySelector('.modal-body');\r\n    let modalFooter = confirmDialogElment.querySelector('.modal-footer');\r\n    modalBody.innerHTML = `<h5>${message}</h5>`;\r\n    if (title) {\r\n        modalHeader.querySelector('h4').innerHTML = title;\r\n    }\r\n    let cancelButton = modalFooter.querySelector('[name=\"cancel\"]');\r\n    let okButton = modalFooter.querySelector('[name=\"ok\"]');\r\n    let closeButton = modalHeader.querySelector('.close');\r\n    closeButton.onclick = cancelButton.onclick = function () {\r\n        cancel()\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        });\r\n    };\r\n    okButton.onclick = function (event) {\r\n        execute(event)\r\n            .then(() => hideDialog(confirmDialogElment))\r\n            .then(() => {\r\n            confirmDialogElment.remove();\r\n        })\r\n            .catch(() => hideDialog(confirmDialogElment));\r\n    };\r\n    showDialog(confirmDialogElment);\r\n}\r\nexports.confirm = confirm;\r\nexports.showToastMessage = toast;\r\nfunction toast(obj) {\r\n    if (obj == null)\r\n        throw errors_1.errors.argumentNull('obj');\r\n    let msg;\r\n    let title;\r\n    if (typeof obj == 'object') {\r\n        if (obj.tagName == null) {\r\n            let options = obj;\r\n            msg = options.message;\r\n            title = options.title;\r\n        }\r\n        else {\r\n            msg = obj;\r\n        }\r\n    }\r\n    else {\r\n        msg = obj;\r\n    }\r\n    let dialogContainer = exports.dialogConfig.dialogContainer || document.body;\r\n    let toastDialogElement = document.createElement('div');\r\n    toastDialogElement.className = 'modal fade in';\r\n    toastDialogElement.style.marginTop = '20px';\r\n    console.assert(dialogContainer != null, 'dialog container is null.');\r\n    dialogContainer.appendChild(toastDialogElement);\r\n    let header = title ? `<div class=\"modal-header\">\r\n                                    <h4 class=\"modal-title\">${title}</h4>\r\n                               </div>` : '';\r\n    toastDialogElement.innerHTML = `\r\n                        <div class=\"modal-dialog\">\r\n                            <div class=\"modal-content\">\r\n                                ${header}\r\n                                <div class=\"modal-body form-horizontal\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n    let modalBody = toastDialogElement.querySelector('.modal-body');\r\n    console.assert(modalBody != null);\r\n    if (typeof msg == 'string') {\r\n        modalBody.innerHTML = `<h5>${msg}</h5>`;\r\n    }\r\n    else if (typeof msg == 'function') {\r\n        modalBody.innerHTML = `<h5>${msg()}</h5>`;\r\n    }\r\n    else\r\n        modalBody.appendChild(msg);\r\n    // let dialog = new Dialog(toastDialogElement);\r\n    // dialog.show();\r\n    showDialog(toastDialogElement);\r\n    setTimeout(() => {\r\n        hideDialog(toastDialogElement).then(() => {\r\n            toastDialogElement.remove();\r\n        });\r\n    }, 500);\r\n}\r\nexports.toast = toast;\r\nexports.showPanel = (function () {\r\n    let panel = document.createElement('div');\r\n    panel.className = 'mobile-page panel';\r\n    panel.style.display = 'none';\r\n    document.body.appendChild(panel);\r\n    panel.innerHTML = `\r\n            <div class=\"modal\">\r\n                <div class=\"modal-dialog\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n    \r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n    \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-backdrop in\">\r\n            </div>\r\n        `;\r\n    let modal = panel.querySelector('.modal');\r\n    let backdrop = panel.querySelector('.modal-backdrop');\r\n    let header = panel.querySelector('.modal-header');\r\n    let footer = panel.querySelector('.modal-footer');\r\n    let body = panel.querySelector(\".modal-body\");\r\n    let modalDialog = panel.querySelector(\".modal-dialog\");\r\n    let isIOS = navigator.userAgent.indexOf('iPhone') > 0 || navigator.userAgent.indexOf('iPad') > 0;\r\n    //=====================================================================\r\n    // 点击非窗口区域，关窗口。并禁用上级元素的 touch 操作。\r\n    // let panel = this.panel; //this.refs['panel'] as HTMLElement;\r\n    // let modalDialog = this.modalDialog; //this.refs['modalDialog'] as HTMLElement;\r\n    panel.addEventListener('touchstart', (event) => {\r\n        let dialogRect = modalDialog.getBoundingClientRect();\r\n        for (let i = 0; i < event.touches.length; i++) {\r\n            let { clientX } = event.touches[i];\r\n            if (clientX < dialogRect.left) {\r\n                hide();\r\n                return;\r\n            }\r\n        }\r\n    });\r\n    if (isIOS) {\r\n        panel.addEventListener('touchstart', (event) => {\r\n            let tagName = event.target.tagName;\r\n            if (tagName == 'BUTTON' || tagName == 'INPUT' || tagName == 'A') {\r\n                return;\r\n            }\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n        });\r\n    }\r\n    function hide() {\r\n        modal.style.removeProperty('transform');\r\n        backdrop.style.opacity = '0';\r\n        window.setTimeout(() => {\r\n            panel.style.display = 'none';\r\n        }, 500);\r\n    }\r\n    return function showPanel(args) {\r\n        args = args || {};\r\n        panel.style.display = 'block';\r\n        modal.style.display = 'block';\r\n        setTimeout(() => {\r\n            modal.style.transform = 'translateX(0)';\r\n            backdrop.style.opacity = '0.5';\r\n        }, 50);\r\n        let setBodyHeight = () => {\r\n            let headerHeight = header.getBoundingClientRect().height;\r\n            let footerHeight = footer.getBoundingClientRect().height;\r\n            let bodyHeight = window.innerHeight - headerHeight - footerHeight;\r\n            body.style.height = `${bodyHeight}px`;\r\n        };\r\n        window.addEventListener('resize', () => setBodyHeight());\r\n        setBodyHeight();\r\n        if (args.header)\r\n            args.header(header);\r\n        if (args.body)\r\n            args.body(body);\r\n        if (args.footer)\r\n            args.footer(footer);\r\n        return {\r\n            hide: () => hide()\r\n        };\r\n    };\r\n})();\r\n"],"file":"dialog.js"}